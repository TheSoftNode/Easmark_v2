(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{70114:function(e,s,a){Promise.resolve().then(a.bind(a,8277))},8277:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return a_}});var t=a(57437),l=a(2265),i=a(58293),r=a(14938),n=a(17689),c=a(99397),o=a(62869),d=a(66070),m=a(88226);let x=e=>{let{balance:s,nextExpiration:a,onTopUp:l}=e;return(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg text-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Credit Balance"}),(0,t.jsx)(m.Z,{className:"h-6 w-6"})]}),(0,t.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[s.toLocaleString()," Credits"]}),(0,t.jsxs)("div",{className:"text-sm opacity-90",children:["Next expiration: ",a.credits.toLocaleString()," credits in ",a.days," days"]}),(0,t.jsx)(o.z,{onClick:l,className:"mt-4 bg-white text-indigo-600 hover:bg-gray-100 transition-colors",children:"Top Up Credits"})]})};var u=a(95252),h=a(65621),p=a(94508);let j=e=>{let{type:s,className:a}=e;return"credit"===s?(0,t.jsx)(u.Z,{className:(0,p.cn)("h-8 w-8 text-green-500",a)}):(0,t.jsx)(h.Z,{className:(0,p.cn)("h-8 w-8 text-blue-500",a)})},v=e=>"credit"===e?"text-green-600":"text-red-600",g=(e,s)=>"".concat("credit"===e?"+":"-").concat(s.toLocaleString()," credits"),f=e=>{let{transactions:s,className:a}=e;return s.length?(0,t.jsxs)("div",{className:(0,p.cn)("space-y-4",a),children:[(0,t.jsx)("h4",{className:"font-medium text-lg",children:"Recent Transactions"}),(0,t.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j,{type:e.type,className:"mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.date})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:(0,p.cn)("font-medium",v(e.type)),children:g(e.type,e.credit_amount)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id))})]}):(0,t.jsx)("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No transactions to display"})})};var y=a(90740),N=a(92735),b=a(20464),w=a(70525),_=a(31047),C=a(40370),Z=a(47625),S=a(75169),k=a(3574),D=a(20407),A=a(8147),O=a(22190),z=a(77031),F=a(56940),M=a(97059),P=a(62994),T=a(31699),Y=a(53647);let R=e=>{let{icon:s,title:a,value:l,change:i,isPositive:r}=e;return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:a}),(0,t.jsx)(s,{className:"h-4 w-4 text-indigo-600"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:l}),i&&(0,t.jsxs)("p",{className:"text-xs ".concat(r?"text-green-600":"text-red-600"),children:[r?"↑":"↓"," ",i," from last period"]})]})]})};var U=a(5481),I=a(23263);let E=e=>{let{transactions:s}=e,a=s.reduce((e,s)=>{let a=new Date(s.time_of_use),t="".concat(a.toLocaleString("default",{month:"short"})," ").concat(a.getFullYear()),l=e.find(e=>e.month===t);return l?"usage"===s.transaction_type&&(l.credits+=s.credit_amount,l.analyses+=1):e.push({month:t,credits:"usage"===s.transaction_type?s.credit_amount:0,analyses:"usage"===s.transaction_type?1:0}),e},[]);return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Usage Trends"}),(0,t.jsx)(d.SZ,{children:"Analysis and credit usage over time"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"h-[400px]",children:(0,t.jsx)(Z.h,{width:"100%",height:"100%",children:(0,t.jsxs)(U.T,{data:a,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"colorAnalyses",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.8}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),(0,t.jsxs)("linearGradient",{id:"colorCredits",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),(0,t.jsx)(F.q,{strokeDasharray:"3 3"}),(0,t.jsx)(M.K,{dataKey:"month"}),(0,t.jsx)(P.B,{yAxisId:"left"}),(0,t.jsx)(P.B,{yAxisId:"right",orientation:"right"}),(0,t.jsx)(A.u,{}),(0,t.jsx)(O.D,{}),(0,t.jsx)(I.u,{yAxisId:"left",type:"monotone",dataKey:"analyses",stroke:"#6366f1",fillOpacity:1,fill:"url(#colorAnalyses)",name:"Analyses"}),(0,t.jsx)(I.u,{yAxisId:"right",type:"monotone",dataKey:"credits",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorCredits)",name:"Credits Used"})]})})})})]})};var L=a(39111);let V=["#6366f1","#8b5cf6","#ec4899","#f43f5e","#f97316"],B=[{title:"Peak Usage Times",description:"Your most active analysis times are between 2 PM and 6 PM on weekdays.",bgColor:"bg-blue-50",textColor:"text-blue-700",titleColor:"text-blue-900"},{title:"Credit Efficiency",description:"Your average credit usage per analysis has improved by 15% compared to last month.",bgColor:"bg-green-50",textColor:"text-green-700",titleColor:"text-green-900"},{title:"Popular Features",description:"Plagiarism detection and grammar checking are your most frequently used features.",bgColor:"bg-purple-50",textColor:"text-purple-700",titleColor:"text-purple-900"}],$=(e,s)=>{let a=new Date(e);switch(s){case"week":a.setDate(a.getDate()-7);break;case"month":default:a.setMonth(a.getMonth()-1);break;case"quarter":a.setMonth(a.getMonth()-3);break;case"year":a.setFullYear(a.getFullYear()-1)}return a},W=()=>{let[e,s]=(0,l.useState)("month"),a=(0,l.useMemo)(()=>{let s=new Date;return{start_date:$(s,e).toISOString(),end_date:s.toISOString()}},[e]),{data:i,isLoading:r}=(0,L.xT)(),{data:n,isLoading:c}=(0,L.Dj)(),{data:m,isLoading:x}=(0,L.pb)(a),u=(0,l.useMemo)(()=>{if(!(null==i?void 0:i.usage_history))return{analyses:0,totalCredits:0,avgDaily:0,analysesChange:"0",creditsChange:"0",avgDailyChange:"0"};let s=new Date(a.start_date),t=$(s,e),l=i.usage_history.filter(e=>new Date(e.time_of_use)>=s),r=l.length,n=l.reduce((e,s)=>e+s.credit_usage,0),c=i.usage_history.filter(e=>{let a=new Date(e.time_of_use);return a>=t&&a<s}),o=c.length,d=c.reduce((e,s)=>e+s.credit_usage,0),m=Math.round(r/("week"===e?7:30)),x=Math.round(o/("week"===e?7:30)),u=(e,s)=>s?((e-s)/s*100).toFixed(1):"0";return{analyses:r,totalCredits:n,avgDaily:m,analysesChange:u(r,o),creditsChange:u(n,d),avgDailyChange:u(m,x)}},[null==i?void 0:i.usage_history,a,e]),{documentTypes:h,subjectAreas:p}=(0,l.useMemo)(()=>{if(!(null==i?void 0:i.usage_history))return{documentTypes:[{name:"Assignments",value:0},{name:"Research Papers",value:0},{name:"Essays",value:0},{name:"Reports",value:0},{name:"Others",value:0}],subjectAreas:[{name:"Computer Science",value:0},{name:"Engineering",value:0},{name:"Business",value:0},{name:"Sciences",value:0},{name:"Humanities",value:0}]};let e={Assignments:0,"Research Papers":0,Essays:0,Reports:0,Others:0},s={"Computer Science":0,Engineering:0,Business:0,Sciences:0,Humanities:0};return i.usage_history.forEach(a=>{e.Assignments++,s["Computer Science"]++}),{documentTypes:Object.entries(e).map(e=>{let[s,a]=e;return{name:s,value:a}}),subjectAreas:Object.entries(s).map(e=>{let[s,a]=e;return{name:s,value:a}})}},[null==i?void 0:i.usage_history]);return r&&c&&x?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between flex-wrap gap-y-3 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Time Range:"}),(0,t.jsxs)(Y.Ph,{value:e,onValueChange:e=>s(e),children:[(0,t.jsx)(Y.i4,{className:"w-[180px]",children:(0,t.jsx)(Y.ki,{placeholder:"Select time range"})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"week",children:"Last Week"}),(0,t.jsx)(Y.Ql,{value:"month",children:"Last Month"}),(0,t.jsx)(Y.Ql,{value:"quarter",children:"Last Quarter"}),(0,t.jsx)(Y.Ql,{value:"year",children:"Last Year"})]})]})]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Export Report"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(R,{icon:b.Z,title:"Total Analyses",value:u.analyses,change:"".concat(u.analysesChange,"%"),isPositive:Number(u.analysesChange)>0}),(0,t.jsx)(R,{icon:w.Z,title:"Credits Used",value:u.totalCredits,change:"".concat(u.creditsChange,"%"),isPositive:Number(u.creditsChange)>0}),(0,t.jsx)(R,{icon:_.Z,title:"Avg. Daily Usage",value:u.avgDaily,change:"".concat(u.avgDailyChange,"%"),isPositive:Number(u.avgDailyChange)>0}),(0,t.jsx)(R,{icon:C.Z,title:"Credit Balance",value:(null==n?void 0:n.credit_balance)||0})]}),m&&(0,t.jsx)(E,{transactions:m}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Document Types"}),(0,t.jsx)(d.SZ,{children:"Distribution of analyzed document types"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(Z.h,{width:"100%",height:"100%",children:(0,t.jsxs)(S.u,{children:[(0,t.jsx)(k.b,{data:h,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{let{name:s,percent:a}=e;return"".concat(s," ").concat((100*a).toFixed(0),"%")},children:h.map((e,s)=>(0,t.jsx)(D.b,{fill:V[s%V.length]},"cell-".concat(s)))}),(0,t.jsx)(A.u,{}),(0,t.jsx)(O.D,{})]})})})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Subject Areas"}),(0,t.jsx)(d.SZ,{children:"Distribution of subject areas analyzed"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(Z.h,{width:"100%",height:"100%",children:(0,t.jsxs)(z.v,{data:p,children:[(0,t.jsx)(F.q,{strokeDasharray:"3 3"}),(0,t.jsx)(M.K,{dataKey:"name"}),(0,t.jsx)(P.B,{}),(0,t.jsx)(A.u,{}),(0,t.jsx)(T.$,{dataKey:"value",fill:"#6366f1",children:p.map((e,s)=>(0,t.jsx)(D.b,{fill:V[s%V.length]},"cell-".concat(s)))})]})})})})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Usage Insights"}),(0,t.jsx)(d.SZ,{children:"Key metrics and patterns from your usage"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:B.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 ".concat(e.bgColor," rounded-lg"),children:[(0,t.jsx)("h4",{className:"font-medium ".concat(e.titleColor," mb-2"),children:e.title}),(0,t.jsx)("p",{className:e.textColor,children:e.description})]},s))})})]})]})};var H=a(41671),Q=a(91723),K=a(49322),q=a(87414),X=a(95186),G=a(65613),J=a(68220);let ee={active:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",revoked:"bg-gray-100 text-gray-800"},es=e=>{let{coupon:s,onUse:a}=e,l={active:(0,t.jsx)(H.Z,{className:"h-4 w-4 mr-2 text-green-600"}),pending:(0,t.jsx)(Q.Z,{className:"h-4 w-4 mr-2 text-yellow-600"}),expired:(0,t.jsx)(K.Z,{className:"h-4 w-4 mr-2 text-red-600"}),revoked:(0,t.jsx)(K.Z,{className:"h-4 w-4 mr-2 text-gray-600"})};return(0,t.jsxs)("div",{className:"group relative bg-white rounded-xl shadow-sm transition-all duration-200 hover:shadow-md border border-gray-200 overflow-hidden hover:border-violet-200",children:[(0,t.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,t.jsxs)("div",{className:"flex items-center",children:[l[s.status],(0,t.jsx)("span",{className:"px-3 py-1 rounded-full  text-xs font-medium tracking-wide ".concat(ee[s.status]||"bg-gray-100 text-gray-800"),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h3",{className:"text-sm font-extrabold tracking-tight mb-2",children:s.code}),(0,t.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:s.description})]})}),(0,t.jsxs)("div",{className:"grid gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 transition-colors group-hover:bg-violet-50/50",children:[(0,t.jsx)(q.Z,{className:"h-5 w-5 text-violet-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Discount"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.discount})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 transition-colors group-hover:bg-purple-50/50",children:[(0,t.jsx)(Q.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Valid Until"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.validUntil})]})]}),void 0!==s.remainingAnalyses&&null!==s.remainingAnalyses&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 transition-colors group-hover:bg-blue-50/50",children:[(0,t.jsx)(H.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Remaining Analyses"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s.remainingAnalyses})]})]})]}),"active"===s.status&&(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(o.z,{className:"w-full h-11 font-medium shadow-sm transition-all duration-200 hover:shadow hover:bg-violet-50 hover:text-violet-700 hover:border-violet-200",variant:"outline",onClick:()=>{null==a||a(s.code)},children:"Use Coupon"})})]})]})},ea=e=>{var s;let{coupon_details:a,status:t,remaining_analyses:l}=e,i=new Date,r=new Date(a.valid_from),n=new Date(a.valid_until),c=t||"pending";r>i&&(c="pending");let o=(e,s)=>{switch(e){case"percentage":return"".concat(s,"% off");case"fixed":return"$".concat(s," off");case"analysis_count":return"".concat(s," free analyses");default:return"".concat(s," off")}},d=[o(a.coupon_type,a.discount_value.toString()),0!==Number(a.minimum_credit_amount)&&"Min. amount: $".concat(a.minimum_credit_amount),null!==l&&"Remaining: ".concat(l),(null===(s=a.analysis_types)||void 0===s?void 0:s.length)&&"For: ".concat(a.analysis_types.join(", "))].filter(Boolean);return{code:a.code,description:d.join(" • "),status:c,discount:o(a.coupon_type,a.discount_value.toString()),validUntil:n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),analysisTypes:a.analysis_types,minimumAmount:a.minimum_credit_amount.toString(),remainingAnalyses:l}},et=()=>{let[e,s]=(0,l.useState)(""),[a]=(0,J.hF)(),{data:i,isLoading:r}=(0,J._B)(),[n,c]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),u=async()=>{if(e.trim())try{c(null),x(null),await a({code:e}).unwrap(),s(""),x("Successfully redeemed coupon: ".concat(e))}catch(e){var t;c((null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to redeem coupon"),x(null)}},h=async e=>{try{c(null),x(null),await a({code:e}).unwrap(),x("Successfully applied coupon: ".concat(e))}catch(e){var s;c((null===(s=e.data)||void 0===s?void 0:s.error)||"Failed to apply coupon"),x(null)}},p=l.useMemo(()=>i?[...i.active_coupons||[],...i.expired_coupons||[],...i.revoked_coupons||[],...i.inactive_coupons||[]].map(ea):[],[i]);return r?(0,t.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,t.jsx)("p",{children:"Loading coupons..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Redeem Coupon"}),(0,t.jsx)(d.SZ,{children:"Enter your coupon code to redeem special offers"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(X.I,{placeholder:"Enter coupon code",value:e,onChange:e=>s(e.target.value),className:"flex-1",maxLength:20,onKeyDown:e=>{"Enter"===e.key&&u()}}),(0,t.jsx)(o.z,{onClick:u,children:"Redeem"})]}),n&&(0,t.jsxs)(G.bZ,{variant:"destructive",className:"mt-4",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.Cd,{children:"Error"}),(0,t.jsx)(G.X,{children:n})]}),m&&(0,t.jsxs)(G.bZ,{className:"mt-4 bg-green-50 border-green-200",children:[(0,t.jsx)(H.Z,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(G.Cd,{className:"text-green-800",children:"Success"}),(0,t.jsx)(G.X,{className:"text-green-700",children:m})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{className:"h-fit",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center text-violet-900",children:[(0,t.jsx)(H.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Active Coupons"]}),(0,t.jsx)(d.SZ,{children:"Your currently available coupons"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[p.filter(e=>"active"===e.status||"pending"===e.status).map((e,s)=>(0,t.jsx)(es,{coupon:e,onUse:h},"active-".concat(e.code,"-").concat(s))),!p.some(e=>"active"===e.status||"pending"===e.status)&&(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No active coupons available"})]})]}),(0,t.jsxs)(d.Zb,{className:"h-fit",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center text-gray-700",children:[(0,t.jsx)(Q.Z,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Expired & Revoked"]}),(0,t.jsx)(d.SZ,{children:"Expired and revoked coupon codes"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[p.filter(e=>"expired"===e.status||"revoked"===e.status).map((e,s)=>(0,t.jsx)(es,{coupon:e},"inactive-".concat(e.code,"-").concat(s))),!p.some(e=>"expired"===e.status||"revoked"===e.status)&&(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No expired or revoked coupons"})]})]})]}),(0,t.jsxs)(G.bZ,{variant:"default",className:"bg-blue-50 border-blue-200",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(G.Cd,{className:"text-blue-800",children:"Pro Tip"}),(0,t.jsx)(G.X,{className:"text-blue-700",children:"Follow us on social media to get notified about new coupon codes and special offers!"})]})]})};var el=a(55455),ei=a(48736),er=a(64935),en=a(75368);let ec=e=>{let{icon:s,title:a,description:l,children:i}=e;return(0,t.jsxs)(d.Zb,{className:"mb-8",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(s,{className:"h-6 w-6 mr-2 text-indigo-600"}),(0,t.jsx)(d.ll,{className:"text-xl",children:a})]}),(0,t.jsx)(d.SZ,{children:l})]}),(0,t.jsx)(d.aY,{children:i})]})},eo=()=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.Zb,{className:"bg-gradient-to-r from-indigo-50 to-purple-50",children:(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center space-y-0",children:[(0,t.jsx)(el.Z,{className:"h-8 w-8 mr-3 text-indigo-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.ll,{children:"Documentation"}),(0,t.jsx)(d.SZ,{children:"Learn how to use our document analysis system"})]})]})}),(0,t.jsx)(ec,{icon:ei.Z,title:"Getting Started",description:"Learn the basics of using our document analysis system",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"ml-4 border-l-2 border-indigo-200 pl-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"1. Upload Your Document"}),(0,t.jsx)("p",{className:"text-gray-600",children:'Click the "New Analysis" button and select your document. We support PDF, Word, and plain text files up to 50MB.'})]}),(0,t.jsxs)("div",{className:"ml-4 border-l-2 border-indigo-200 pl-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"2. Select Analysis Type"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Choose the type of analysis you need - plagiarism check, grammar review, or content evaluation."})]}),(0,t.jsxs)("div",{className:"ml-4 border-l-2 border-indigo-200 pl-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"3. Review Results"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Once analysis is complete, you'll receive detailed results and suggestions for improvement."})]})]})}),(0,t.jsx)(ec,{icon:er.Z,title:"Credits System",description:"Understanding how credits work and how to manage them",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Credit Usage"}),(0,t.jsx)("div",{className:"grid gap-3",children:[{name:"Basic document analysis",credits:5,description:"General analysis with basic feedback"},{name:"Advanced analysis",credits:10,description:"Detailed feedback with in-depth suggestions"},{name:"Premium analysis",credits:20,description:"Expert review with comprehensive feedback"}].map((e,s)=>(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,t.jsxs)("span",{className:"text-indigo-600 font-semibold",children:[e.credits," credits"]})]},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Credit Packages"}),(0,t.jsx)("div",{className:"grid gap-3",children:[{name:"Starter Pack",credits:50,price:25},{name:"Professional Pack",credits:200,price:90},{name:"Enterprise Pack",credits:500,price:200}].map((e,s)=>(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.credits," credits"]})]}),(0,t.jsxs)("span",{className:"text-green-600 font-semibold",children:["$",e.price]})]},s))})]})]})}),(0,t.jsx)(ec,{icon:en.Z,title:"FAQs",description:"Common questions and answers about our service",children:(0,t.jsx)("div",{className:"grid gap-4",children:[{q:"How accurate is the analysis?",a:"Our system maintains 95%+ accuracy across all types of documents and analyses."},{q:"What happens if I run out of credits?",a:"You'll need to purchase more credits to continue using the service. We offer various packages to suit your needs."},{q:"Can I get a refund for unused credits?",a:"Credits are non-refundable but they don't expire for 12 months from the purchase date."}].map((e,s)=>(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsx)(d.ll,{className:"text-base",children:e.q})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("p",{className:"text-gray-600",children:e.a})})]},s))})})]});var ed=a(92369),em=a(88906),ex=a(94766),eu=a(97226),eh=a(33801);let ep=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(eh.fC,{className:(0,p.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:s,children:(0,t.jsx)(eh.bU,{className:(0,p.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});ep.displayName=eh.fC.displayName;var ej=a(69064),ev=a(21123),eg=a(51817),ef=a(83229),ey=a(26815);let eN=e=>{let{user:s}=e,[a,i]=(0,l.useState)(s),[r,n]=(0,l.useState)(!1),[c,{isLoading:d}]=(0,ev.p6)(),[m,{isLoading:x}]=(0,ev.TG)();(0,l.useEffect)(()=>{i(s)},[s]),(0,l.useEffect)(()=>{n(JSON.stringify(a)!==JSON.stringify(s))},[a,s]);let u=async()=>{try{let e=await c({email:s.email}).unwrap();ej.ZP.success((null==e?void 0:e.message)||"Verification email sent successfully")}catch(s){var e;ej.ZP.error((null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to send verification email")}},h=async e=>{e.preventDefault();try{let e={name:a.name};switch(a.user_type){case"student":a.student_profile&&(e.student_profile={department:a.student_profile.department,course_of_study:a.student_profile.course_of_study});break;case"lecturer":a.lecturer_profile&&(e.lecturer_profile={department:a.lecturer_profile.department});break;case"institution":a.institution_profile&&(e.institution_profile={institution_name:a.institution_profile.institution_name,institution_type:a.institution_profile.institution_type,contact_person_name:a.institution_profile.contact_person_name})}let s=await m(e).unwrap();ej.ZP.success((null==s?void 0:s.message)||"Profile updated successfully"),n(!1)}catch(e){var s;ej.ZP.error((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to update profile")}};return(0,t.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[!s.is_verified&&(0,t.jsx)(G.bZ,{variant:"destructive",children:(0,t.jsxs)(G.X,{children:["Your email is not verified. Please verify your email to access all features.",d?(0,t.jsx)("span",{className:"ml-2",children:"Sending verification email..."}):(0,t.jsx)(o.z,{variant:"link",onClick:u,className:"ml-2 p-0 h-auto font-semibold",children:"Resend verification email"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"name",children:"Full Name"}),(0,t.jsx)(X.I,{id:"name",value:a.name,onChange:e=>i(s=>({...s,name:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"email",children:"Email Address"}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)(X.I,{id:"email",type:"email",value:a.email,disabled:!0,className:"bg-gray-50"})})]}),(()=>{var e,s,l,r,n,c;switch(a.user_type){case"student":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"department",children:"Department"}),(0,t.jsx)(X.I,{id:"department",value:(null===(e=a.student_profile)||void 0===e?void 0:e.department)||"",onChange:e=>i(s=>({...s,student_profile:{...s.student_profile,department:e.target.value}}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"course",children:"Course of Study"}),(0,t.jsx)(X.I,{id:"course",value:(null===(s=a.student_profile)||void 0===s?void 0:s.course_of_study)||"",onChange:e=>i(s=>({...s,student_profile:{...s.student_profile,course_of_study:e.target.value}}))})]})]});case"lecturer":return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"department",children:"Department"}),(0,t.jsx)(X.I,{id:"department",value:(null===(l=a.lecturer_profile)||void 0===l?void 0:l.department)||"",onChange:e=>i(s=>({...s,lecturer_profile:{...s.lecturer_profile,department:e.target.value}}))})]});case"institution":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"institutionName",children:"Institution Name"}),(0,t.jsx)(X.I,{id:"institutionName",value:(null===(r=a.institution_profile)||void 0===r?void 0:r.institution_name)||"",onChange:e=>i(s=>({...s,institution_profile:{...s.institution_profile,institution_name:e.target.value}}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"institutionType",children:"Institution Type"}),(0,t.jsx)(X.I,{id:"institutionType",value:(null===(n=a.institution_profile)||void 0===n?void 0:n.institution_type)||"",onChange:e=>i(s=>({...s,institution_profile:{...s.institution_profile,institution_type:e.target.value}}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:"contactPerson",children:"Contact Person Name"}),(0,t.jsx)(X.I,{id:"contactPerson",value:(null===(c=a.institution_profile)||void 0===c?void 0:c.contact_person_name)||"",onChange:e=>i(s=>({...s,institution_profile:{...s.institution_profile,contact_person_name:e.target.value}}))})]})]})}})()]}),(0,t.jsx)(o.z,{type:"submit",disabled:!r||x,className:"w-full bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500    hover:from-blue-600 hover:via-indigo-600 hover:to-violet-600 text-white   transition-all duration-300 ease-in-out",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating Profile..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ef.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})};var eb=a(87769),ew=a(42208);let e_=l.memo(e=>{let{id:s,label:a,value:l,onChange:i,showPassword:r,onTogglePassword:n}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ey._,{htmlFor:s,children:a}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(X.I,{id:s,type:r?"text":"password",value:l,onChange:e=>i(e.target.value),required:!0,className:"pr-10"}),(0,t.jsx)("button",{type:"button",onClick:n,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:r?(0,t.jsx)(eb.Z,{className:"h-4 w-4"}):(0,t.jsx)(ew.Z,{className:"h-4 w-4"})})]})]})});e_.displayName="PasswordInput";let eC=()=>{let[e,s]=(0,l.useState)({old_password:"",new_password:"",confirm_password:""}),[a,i]=(0,l.useState)({old_password:!1,new_password:!1,confirm_password:!1}),[r,{isLoading:n}]=(0,ev.$h)(),c=async a=>{if(a.preventDefault(),e.new_password!==e.confirm_password){ej.ZP.error("New passwords do not match");return}try{let a=await r({old_password:e.old_password,new_password:e.new_password}).unwrap();console.log(a);let t=(null==a?void 0:a.message)||"Password updated successfully";ej.ZP.success(t),s({old_password:"",new_password:"",confirm_password:""})}catch(s){var t,l,i;let e=(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.detail)||(null==s?void 0:null===(i=s.data)||void 0===i?void 0:i.error)||"Failed to update password";ej.ZP.error(e)}},d=e=>a=>{s(s=>({...s,[e]:a}))},m=e=>()=>{i(s=>({...s,[e]:!s[e]}))};return(0,t.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,t.jsx)(e_,{id:"currentPassword",label:"Current Password",value:e.old_password,onChange:d("old_password"),showPassword:a.old_password,onTogglePassword:m("old_password")}),(0,t.jsx)(e_,{id:"newPassword",label:"New Password",value:e.new_password,onChange:d("new_password"),showPassword:a.new_password,onTogglePassword:m("new_password")}),(0,t.jsx)(e_,{id:"confirmPassword",label:"Confirm New Password",value:e.confirm_password,onChange:d("confirm_password"),showPassword:a.confirm_password,onTogglePassword:m("confirm_password")}),(0,t.jsxs)(o.z,{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500    hover:from-blue-600 hover:via-indigo-600 hover:to-violet-600 text-white",children:[(0,t.jsx)(em.Z,{className:"h-4 w-4 mr-2"}),n?"Updating Password...":"Update Password"]})]})},eZ=e=>{let{title:s,description:a,defaultChecked:i=!1,onToggle:r}=e,[n,c]=l.useState(i);return(0,t.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:s}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:a})]}),(0,t.jsx)(ep,{checked:n,onCheckedChange:e=>{c(e),null==r||r(e)},className:"ml-4"})]})};var eS=()=>{let e=async(e,s)=>{try{ej.ZP.success("".concat(e," notifications ").concat(s?"enabled":"disabled"))}catch(s){ej.ZP.error("Failed to update ".concat(e.toLowerCase()," notification settings"))}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(eZ,{title:"Analysis Completion",description:"Get notified when your document analysis is complete",defaultChecked:!0,onToggle:s=>e("Analysis",s)}),(0,t.jsx)(eZ,{title:"Credit Balance Alerts",description:"Receive alerts when your credit balance is low",defaultChecked:!0,onToggle:s=>e("Balance",s)}),(0,t.jsx)(eZ,{title:"Special Offers",description:"Stay updated with special offers and promotions",defaultChecked:!1,onToggle:s=>e("Offers",s)}),(0,t.jsx)(eZ,{title:"Newsletter",description:"Receive monthly newsletter with tips and updates",defaultChecked:!1,onToggle:s=>e("Newsletter",s)})]})};let ek=e=>{let{icon:s,title:a,children:l}=e;return(0,t.jsxs)(d.Zb,{className:"mb-8",children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center space-y-0",children:[(0,t.jsx)(s,{className:"h-5 w-5 mr-2 text-indigo-600"}),(0,t.jsx)(d.ll,{children:a})]}),(0,t.jsx)(d.aY,{children:l})]})},eD=()=>{let{data:e,isLoading:s}=(0,ev.iS)(),[a,i]=l.useState(!1),r=async e=>{try{console.log("Updating profile:",e),ej.ZP.success("Profile updated successfully")}catch(e){ej.ZP.error("Failed to update profile")}};return s?(0,t.jsx)("div",{children:"Loading..."}):(null==e?void 0:e.user)?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(ek,{icon:ed.Z,title:"Profile Settings",children:(0,t.jsx)(eN,{user:e.user,onUpdateProfile:r})}),(0,t.jsx)(ek,{icon:em.Z,title:"Security Settings",children:(0,t.jsx)(eC,{})}),(0,t.jsx)(ek,{icon:ex.Z,title:"Notification Settings",children:(0,t.jsx)(eS,{})}),(0,t.jsx)(ek,{icon:eu.Z,title:"Appearance",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:"Dark Mode"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Toggle dark mode theme"})]}),(0,t.jsx)(ep,{checked:a,onCheckedChange:i})]})})]}):(0,t.jsx)("div",{children:"Error loading user data"})};var eA=a(29349),eO=a(61178),ez=a(98728),eF=a(32489),eM=a(47692),eP=a(40875),eT=a(10407),eY=a(95805),eR=a(6818);let eU={sm:"w-full h-8 text-xs",md:"w-full h-8 text-sm",lg:"w-full h-6 text-xs"},eI={default:"text-indigo-600 drop-shadow-[0_2px_3px_rgba(0,0,0,0.3)]",scrolled:"text-indigo-600"},eE=e=>{let{name:s,size:a="md",variant:l="default",className:i,showHoverEffect:r=!0}=e;return(0,t.jsxs)("div",{className:(0,p.cn)("relative z-10 flex items-center justify-center","font-semibold rounded-full","transition-all duration-300 p-3",eU[a],eI[l],r&&"group-hover:scale-110","bg-gradient-to-r from-blue-600/10 via-indigo-500/10 to-purple-600/10","border border-indigo-800",i),children:[(0,t.jsx)("span",{className:"text-teal-700 mr-3",children:"Hi"})," ",null==s?void 0:s.split(" ")[0].toUpperCase()]})};var eL=a(99376);let eV=e=>{let{icon:s,label:a,value:l,isOpen:i,isActive:r,isMobile:n=!1,hasChildren:c=!1,isExpanded:o=!1,onClick:d,onExpand:m}=e;return(0,t.jsxs)("button",{onClick:()=>c?null==m?void 0:m():d(l),className:"w-full flex items-center px-4 py-3 transition-colors duration-200\n      ".concat(r?"bg-indigo-50 text-indigo-700 border-r-2 border-indigo-600":"text-gray-700 hover:bg-gray-100"),children:[(0,t.jsx)("span",{className:"h-5 w-5 flex items-center justify-center",children:s}),(i||n)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"ml-3 text-sm font-medium truncate flex-1 text-left",children:a}),c&&(0,t.jsx)("span",{className:"ml-auto",children:o?(0,t.jsx)(eP.Z,{className:"h-4 w-4"}):(0,t.jsx)(eT.Z,{className:"h-4 w-4"})})]})]})},eB=e=>{var s,a;let{isOpen:n,toggleSidebar:c,activeTab:d,onTabChange:x}=e,[u,h]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[v]=(0,ev._y)(),{data:g}=(0,ev.iS)(),f=(0,eL.useRouter)(),y=(null==g?void 0:null===(s=g.user)||void 0===s?void 0:s.role)==="admin";(0,l.useEffect)(()=>{let e=()=>{h(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let N=[{icon:(0,t.jsx)(eY.Z,{className:"h-5 w-5"}),label:"Users",value:"manage-users"},{icon:(0,t.jsx)(q.Z,{className:"h-5 w-5"}),label:"Coupons",value:"manage-coupons"},{icon:(0,t.jsx)(m.Z,{className:"h-5 w-5"}),label:"Credits",value:"manage-credits"},{icon:(0,t.jsx)(eR.Z,{className:"h-5 w-5"}),label:"Analysis",value:"manage-analysis"},{icon:(0,t.jsx)(C.Z,{className:"h-5 w-5"}),label:"Usage",value:"manage-usage"}],b=[{icon:(0,t.jsx)(r.Z,{className:"h-5 w-5"}),label:"Overview",value:"overview"},{icon:(0,t.jsx)(eA.Z,{className:"h-5 w-5"}),label:"Analyse",value:"analyse"},{icon:(0,t.jsx)(eO.Z,{className:"h-5 w-5"}),label:"Saved Analysis",value:"saved-analysis"},{icon:(0,t.jsx)(ei.Z,{className:"h-5 w-5"}),label:"Activity",value:"activity"},{icon:(0,t.jsx)(q.Z,{className:"h-5 w-5"}),label:"Credits",value:"credits"},{icon:(0,t.jsx)(ed.Z,{className:"h-5 w-5"}),label:"Usage",value:"usage"},{icon:(0,t.jsx)(el.Z,{className:"h-5 w-5"}),label:"Documentation",value:"docs"},{icon:(0,t.jsx)(q.Z,{className:"h-5 w-5"}),label:"Coupons",value:"coupons"},{icon:(0,t.jsx)(ez.Z,{className:"h-5 w-5"}),label:"Settings",value:"settings"}];y&&b.splice(1,0,{icon:(0,t.jsx)(em.Z,{className:"h-5 w-5"}),label:"Management",value:"management",children:N});let w=e=>{x(e)};return(0,t.jsxs)("div",{className:"fixed left-0 top-0 h-full bg-white border-r border-gray-200 \n        transition-all duration-300 z-40 ".concat(u?"w-64":n?"w-64":"w-20"),children:[(0,t.jsxs)("div",{className:"p-4 flex justify-between items-center border-b border-gray-100",children:[(0,t.jsx)("div",{className:"font-bold text-xl text-gray-800 transition-opacity duration-200\n            ".concat(n||u?"opacity-100":"opacity-0 w-0 overflow-hidden"),children:(0,t.jsx)(eE,{name:null==g?void 0:null===(a=g.user)||void 0===a?void 0:a.name})}),!u&&(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:c,className:"hover:bg-gray-100","aria-label":n?"Close sidebar":"Open sidebar",children:n?(0,t.jsx)(eF.Z,{className:"h-4 w-4 text-gray-600"}):(0,t.jsx)(i.Z,{className:"h-4 w-4 text-gray-600"})})]}),(0,t.jsxs)("nav",{className:"flex flex-col h-[calc(100%-5rem)] py-4",children:[(0,t.jsx)("div",{className:"flex-1",children:b.map(e=>{var s,a;return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(eV,{icon:e.icon,label:e.label,value:e.value,isOpen:n,isActive:d===e.value||null!==(a=null===(s=e.children)||void 0===s?void 0:s.some(e=>d===e.value))&&void 0!==a&&a,isMobile:u,hasChildren:!!e.children,isExpanded:p,onClick:w,onExpand:()=>j(!p)}),e.children&&p&&(n||u)&&(0,t.jsx)("div",{className:"pl-4 bg-gray-50",children:e.children.map(e=>(0,t.jsx)(eV,{icon:e.icon,label:e.label,value:e.value,isOpen:n,isActive:d===e.value,isMobile:u,onClick:w},e.value))})]},e.value)})}),(0,t.jsx)("div",{className:"border-t border-gray-100 pt-4",children:(0,t.jsxs)("button",{onClick:()=>{v(),f.push("/login")},className:"w-full flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[(0,t.jsx)("span",{className:"h-5 w-5 flex items-center justify-center",children:(0,t.jsx)(eM.Z,{className:"h-5 w-5"})}),(n||u)&&(0,t.jsx)("span",{className:"ml-3 text-sm font-medium truncate",children:"Logout"})]})})]})]})};var e$=a(86595);let eW=e=>{let{icon:s,title:a,value:l,subtitle:i,trend:r}=e;return(0,t.jsxs)(d.Zb,{className:"transition-all duration-300 hover:shadow-md hover:border-violet-200",children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2 pt-3 px-4",children:[(0,t.jsx)(d.ll,{className:"text-sm font-semibold tracking-wide text-gray-700",children:a}),(0,t.jsx)("div",{className:"p-1.5 rounded-lg bg-violet-50",children:(0,t.jsx)(s,{className:"h-4 w-4 text-violet-600"})})]}),(0,t.jsxs)(d.aY,{className:"px-4 pb-4 space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:l}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,t.jsx)("span",{className:"font-medium ".concat(r.positive?"text-emerald-600 bg-emerald-50":"text-rose-600 bg-rose-50"," px-1.5 py-0.5 rounded-full text-xs"),children:r.value}),(0,t.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:i})]})]})]})},eH=e=>{let{creditBalance:s,transactions:a,onNewAnalysis:l,onBuyCredits:i,analytics:r,activeCoupons:x,usageData:u,usageMetrics:p}=e;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(eW,{icon:m.Z,title:"Available Credits",value:s.current,subtitle:"from recent purchase",trend:{value:"+".concat(s.nextExpiration.credits),positive:!0}}),(0,t.jsx)(eW,{icon:ei.Z,title:"Total Analyses",value:r.total_analyses,subtitle:"Total cost: ".concat(r.total_cost," credits")}),(0,t.jsx)(eW,{icon:e$.Z,title:"Active Coupons",value:(null==x?void 0:x.count)||0,subtitle:(null==x?void 0:x.summary)||"No active coupons"}),(0,t.jsx)(eW,{icon:h.Z,title:"Usage This Month",value:p.currentMonth,subtitle:"from last month",trend:{value:"".concat(p.trend>0?"+":"").concat(p.trend),positive:p.trend>=0}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(d.Zb,{className:"lg:col-span-2",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Usage Overview"}),(0,t.jsx)(d.SZ,{children:"Analysis usage and credit consumption trends"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(Z.h,{width:"100%",height:"100%",children:(0,t.jsxs)(U.T,{data:u,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"colorAnalyses",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.8}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),(0,t.jsxs)("linearGradient",{id:"colorCredits",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),(0,t.jsx)(F.q,{strokeDasharray:"3 3"}),(0,t.jsx)(M.K,{dataKey:"date"}),(0,t.jsx)(P.B,{yAxisId:"left"}),(0,t.jsx)(P.B,{yAxisId:"right",orientation:"right"}),(0,t.jsx)(A.u,{}),(0,t.jsx)(I.u,{yAxisId:"left",type:"monotone",dataKey:"analyses",stroke:"#6366f1",fillOpacity:1,fill:"url(#colorAnalyses)",name:"Analyses"}),(0,t.jsx)(I.u,{yAxisId:"right",type:"monotone",dataKey:"credits",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorCredits)",name:"Credits Used"})]})})})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Quick Actions"}),(0,t.jsx)(d.SZ,{children:"Common tasks and actions"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)(o.z,{className:"w-full",onClick:l,children:[(0,t.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"New Analysis"]}),(0,t.jsxs)(o.z,{className:"w-full",variant:"outline",onClick:i,children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Buy Credits"]}),(0,t.jsxs)(o.z,{className:"w-full",variant:"outline",children:[(0,t.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),"Redeem Coupon"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zb,{className:"h-fit",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Performance Metrics"}),(0,t.jsx)(d.SZ,{children:"Key analysis metrics and trends"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Accuracy Rate"}),(0,t.jsx)(w.Z,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:"98.5%"}),(0,t.jsx)("div",{className:"text-xs text-green-600",children:"↑ 2.1% from last month"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Response Time"}),(0,t.jsx)(Q.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:"1.2s"}),(0,t.jsx)("div",{className:"text-xs text-green-600",children:"↑ 0.3s faster"})]})]})})]}),(0,t.jsxs)(d.Zb,{className:"h-fit",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Recent Activities"}),(0,t.jsx)(d.SZ,{children:"Your latest analysis and account activities"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:a.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"mr-4",children:"credit"===e.type?(0,t.jsx)(m.Z,{className:"h-8 w-8 text-green-500"}):(0,t.jsx)(ei.Z,{className:"h-8 w-8 text-blue-500"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-medium ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-",e.credit_amount," credits"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.date})]})]},e.id))})})]})]})]})};var eQ=a(20422),eK=a(90535);let eq=eQ.fC,eX=eQ.xz;eQ.x8;let eG=eQ.h_,eJ=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(eQ.aV,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:s})});eJ.displayName=eQ.aV.displayName;let e0=(0,eK.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),e2=l.forwardRef((e,s)=>{let{side:a="right",className:l,children:i,...r}=e;return(0,t.jsxs)(eG,{children:[(0,t.jsx)(eJ,{}),(0,t.jsxs)(eQ.VY,{ref:s,className:(0,p.cn)(e0({side:a}),l),...r,children:[(0,t.jsxs)(eQ.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(eF.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),i]})]})});e2.displayName=eQ.VY.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(eQ.Dx,{ref:s,className:(0,p.cn)("text-lg font-semibold text-foreground",a),...l})}).displayName=eQ.Dx.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(eQ.dk,{ref:s,className:(0,p.cn)("text-sm text-muted-foreground",a),...l})}).displayName=eQ.dk.displayName;var e4=a(26110),e5=a(33245),e6=a(12339);function e1(e){let{isOpen:s,onOpenChange:a,trigger:i}=e,[r,n]=(0,l.useState)(""),[c,x]=(0,l.useState)("package"),[h,p]=(0,l.useState)(null),[j,v]=(0,l.useState)(!1),[g,f]=(0,l.useState)("0.00"),[y,N]=(0,l.useState)("0.000"),[b,{isLoading:w}]=(0,L.NM)(),{data:_,isLoading:C}=(0,L.n9)({is_active:!0}),[Z]=(0,L.Fv)(),S=e=>{v(e),null==a||a(e)},k=l.useMemo(()=>_?_.map(e=>{let s=e.min_credits;return{credits:s,price:s*e.price_per_credit,popular:250===s,description:e.max_credits?"".concat(e.min_credits," - ").concat(e.max_credits," credits"):"".concat(e.min_credits,"+ credits")}}):[],[_]);(0,l.useEffect)(()=>{k.length>0&&!h&&p(k.find(e=>e.popular)||k[0])},[k]),(0,l.useEffect)(()=>{(async()=>{if("custom"===c&&r&&parseInt(r)>=50)try{let e=await Z({credit_amount:parseInt(r)}).unwrap();f(e.total_price.toFixed(2)),N((e.total_price/parseInt(r)).toFixed(3))}catch(e){console.error("Price calculation error:",e),f("0.00"),N("0.000")}else f("0.00"),N("0.000")})()},[r,c,Z]);let D=async()=>{try{let e="custom"===c?parseInt(r):h.credits,s=await Z({credit_amount:e}).unwrap();if("custom"===c&&(!e||e<50)){ej.Am.error("Minimum purchase is 50 credits");return}await ej.Am.promise(b({credit_amount:e,dollar_amount:s.total_price}).unwrap(),{loading:"Processing purchase...",success:"Successfully purchased ".concat(e," credits!"),error:"Failed to process purchase"}),S(!1)}catch(e){console.error("Purchase error:",e),ej.Am.error("Failed to process purchase")}};return C?(0,t.jsx)(e4.Vq,{open:null!=s?s:j,onOpenChange:S,children:(0,t.jsx)(e4.cZ,{className:"sm:max-w-[600px]",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-purple-600"})})})}):(0,t.jsxs)(e4.Vq,{open:null!=s?s:j,onOpenChange:S,children:[(0,t.jsx)(e4.hg,{asChild:!0,children:i}),(0,t.jsxs)(e4.cZ,{className:"sm:max-w-[600px] max-h-[98vh] overflow-y-auto",children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{children:"Purchase Credits"}),(0,t.jsx)(e4.Be,{children:"Choose a credit package or enter a custom amount"})]}),(0,t.jsxs)(e6.mQ,{defaultValue:"package",className:"w-full",onValueChange:e=>x(e),children:[(0,t.jsxs)(e6.dr,{className:"grid w-full grid-cols-2 bg-gradient-to-r from-violet-100 via-purple-100 to-blue-100 p-1 rounded-lg",children:[(0,t.jsx)(e6.SP,{value:"package",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-violet-600 data-[state=active]:via-purple-600 data-[state=active]:to-blue-600 data-[state=active]:text-white rounded-md transition-all data-[state=inactive]:text-gray-600 data-[state=inactive]:hover:text-gray-900",children:"Preset Packages"}),(0,t.jsx)(e6.SP,{value:"custom",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-violet-600 data-[state=active]:via-purple-600 data-[state=active]:to-blue-600 data-[state=active]:text-white rounded-md transition-all data-[state=inactive]:text-gray-600 data-[state=inactive]:hover:text-gray-900",children:"Custom Amount"})]}),(0,t.jsx)(e6.nU,{value:"package",className:"space-y-4",children:(0,t.jsx)("div",{className:"grid gap-4 py-4",children:k.map(e=>(0,t.jsxs)("div",{className:"relative p-4 rounded-lg border-2 cursor-pointer transition-all\n                    ".concat((null==h?void 0:h.credits)===e.credits?"border-violet-600 bg-gradient-to-r from-violet-50 via-purple-50 to-blue-50":"border-gray-200 hover:border-purple-300","\n                  "),onClick:()=>p(e),children:[e.popular&&(0,t.jsx)("span",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 text-white px-2 py-1 rounded-full text-xs",children:"Popular"}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg",children:[e.credits," Credits"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),(0,t.jsxs)("p",{className:"text-sm bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent mt-2",children:["$",(e.price/e.credits).toFixed(3)," per credit"]})]}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",e.price.toFixed(2)]})]})]},e.credits))})}),(0,t.jsx)(e6.nU,{value:"custom",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Custom Credit Amount"}),(0,t.jsx)(d.SZ,{children:"Enter the number of credits you'd like to purchase"})]}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Number of Credits"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(X.I,{type:"text",value:r,onChange:e=>{n(e.target.value.replace(/[^0-9]/g,""))},className:"pl-8 border-violet-200 focus:border-purple-500 focus:ring-purple-500",placeholder:"Minimum 50 credits"}),(0,t.jsx)(m.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-violet-500"})]})]}),r&&(0,t.jsxs)("div",{className:"p-4 bg-gradient-to-r from-violet-50 via-purple-50 to-blue-50 rounded-lg space-y-2 border border-violet-100",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Rate per credit:"}),(0,t.jsxs)("span",{className:"font-medium bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:["$",y]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Estimated total:"}),(0,t.jsxs)("span",{className:"font-bold text-lg bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:["$",g]})]})]}),(0,t.jsxs)("div",{className:"text-sm flex items-start gap-2",children:[(0,t.jsx)(e5.Z,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-violet-500"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Minimum purchase is 50 credits. Final price will be calculated based on the current pricing tier. Payment will be processed securely."})]})]})]})})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(o.z,{onClick:D,className:"w-full bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 hover:from-violet-700 hover:via-purple-700 hover:to-blue-700",disabled:w||"custom"===c&&(!r||50>parseInt(r)),children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"custom"===c?"Purchase ".concat(r||"0"," Credits for $").concat(g):"Purchase ".concat((null==h?void 0:h.credits)||0," Credits for $").concat((null==h?void 0:h.price.toFixed(2))||"0.00")]})})})]})]})}var e3=a(48614),e8=a(53736),e7=a(58065),e9=a(84830),se=a(52909),ss=a(65299),sa=a(81334),st=a(11789),sl=a(53376),si=a(41111),sr=e=>{let{onLevelSelect:s}=e;return(0,t.jsxs)(d.Zb,{className:"w-full mt-8 bg-gradient-to-br from-violet-50 via-blue-50 to-white border border-violet-200",children:[(0,t.jsxs)(d.Ol,{className:"space-y-4",children:[(0,t.jsx)(d.ll,{className:"text-2xl font-bold text-center bg-gradient-to-r from-violet-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Select Your Level"}),(0,t.jsx)(d.SZ,{className:"text-center text-gray-600 text-lg",children:"Choose your level to access the appropriate analysis tools"})]}),(0,t.jsxs)(d.aY,{className:"flex flex-col gap-6 items-center p-8",children:[(0,t.jsx)(o.z,{onClick:()=>{s({allowed:!1,message:"Please contact your administrator for access to the junior level analysis tools."})},className:"w-64 h-16 text-lg font-semibold transition-all duration-300 bg-gradient-to-r from-violet-100 via-purple-100 to-blue-100 text-gray-700 hover:from-violet-200 hover:via-purple-200 hover:to-blue-200 border border-violet-200",variant:"outline",children:"Levels 6 - 7"}),(0,t.jsx)(o.z,{onClick:()=>{s({allowed:!0,message:""})},className:"w-64 h-16 text-lg font-semibold transition-all duration-300 bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 hover:from-violet-700 hover:via-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl",children:"Levels 8 - 9"})]})]})},sn=a(92451),sc=()=>{let[e,s]=(0,l.useState)("gradeSelect"),[a,i]=(0,l.useState)("thesis"),[r,n]=(0,l.useState)(0),[c,d]=(0,l.useState)(""),[m,x]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),[p,j]=(0,l.useState)(null),v=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,t=0,l=setInterval(()=>{e(t+=2),t>=100&&(clearInterval(l),s())},a)},g=e=>{x(e),s("uploading"),v(n,()=>s("uploadComplete"))},f=e=>{d(e),s("error")},y=()=>{"error"===e&&c.includes("administrator")?s("gradeSelect"):s("upload"),n(0),x(null),d("")};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"}),(0,t.jsx)(e3.M,{mode:"wait",children:"complete"===e&&u?(0,t.jsx)(e8.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(si.Z,{data:p,uploadType:a,onBack:()=>{s("upload")}})}):(0,t.jsxs)(e8.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"container mx-auto px-4 max-w-3xl relative",children:["gradeSelect"===e&&(0,t.jsx)(sr,{onLevelSelect:e=>{e.allowed?s("upload"):f(e.message)}}),"upload"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.z,{onClick:()=>s("gradeSelect"),variant:"ghost",className:"mb-4 text-violet-600 hover:text-violet-700",children:[(0,t.jsx)(sn.Z,{className:"mr-2 h-4 w-4"}),"Back to Grade Selection"]}),(0,t.jsx)(e7.B,{uploadType:a,onTypeChange:i}),"thesis"===a?(0,t.jsx)(se.Z,{onFileSelect:g,onError:f}):(0,t.jsx)(e9.Z,{onSubmit:e=>{e.content instanceof File&&g(e.content)},onError:f})]}),"uploading"===e&&(0,t.jsx)(ss.t,{uploadProgress:r,uploadType:a,fileName:(null==m?void 0:m.name)||""}),"uploadComplete"===e&&m&&(0,t.jsx)(sa.k,{fileName:m.name,file:m,onUploadAgain:y,onStartAnalysis:e=>{h(e),s("analyzing")},uploadType:a}),"analyzing"===e&&(0,t.jsx)(st.k,{uploadType:a,onAnalysisComplete:()=>{let e=localStorage.getItem("analysisData");e&&(j(JSON.parse(e)),h(JSON.parse(e)),s("complete"))}}),"error"===e&&(0,t.jsx)(sl.X,{error:c,onTryAgain:y})]})})]})})},so=a(27648),sd=a(73494),sm=a(87262),sx=a(56739),su=a(26062),sh=a(60488),sp=a(73247),sj=a(15868),sv=a(37053),sg=a(29501);let sf=sg.RV,sy=l.createContext({}),sN=e=>{let{...s}=e;return(0,t.jsx)(sy.Provider,{value:{name:s.name},children:(0,t.jsx)(sg.Qr,{...s})})},sb=()=>{let e=l.useContext(sy),s=l.useContext(sw),{getFieldState:a,formState:t}=(0,sg.Gc)(),i=a(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=s;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...i}},sw=l.createContext({}),s_=l.forwardRef((e,s)=>{let{className:a,...i}=e,r=l.useId();return(0,t.jsx)(sw.Provider,{value:{id:r},children:(0,t.jsx)("div",{ref:s,className:(0,p.cn)("space-y-2",a),...i})})});s_.displayName="FormItem";let sC=l.forwardRef((e,s)=>{let{className:a,...l}=e,{error:i,formItemId:r}=sb();return(0,t.jsx)(ey._,{ref:s,className:(0,p.cn)(i&&"text-destructive",a),htmlFor:r,...l})});sC.displayName="FormLabel";let sZ=l.forwardRef((e,s)=>{let{...a}=e,{error:l,formItemId:i,formDescriptionId:r,formMessageId:n}=sb();return(0,t.jsx)(sv.g7,{ref:s,id:i,"aria-describedby":l?"".concat(r," ").concat(n):"".concat(r),"aria-invalid":!!l,...a})});sZ.displayName="FormControl";let sS=l.forwardRef((e,s)=>{let{className:a,...l}=e,{formDescriptionId:i}=sb();return(0,t.jsx)("p",{ref:s,id:i,className:(0,p.cn)("text-[0.8rem] text-muted-foreground",a),...l})});sS.displayName="FormDescription";let sk=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e,{error:r,formMessageId:n}=sb(),c=r?String(null==r?void 0:r.message):l;return c?(0,t.jsx)("p",{ref:s,id:n,className:(0,p.cn)("text-[0.8rem] font-medium text-destructive",a),...i,children:c}):null});sk.displayName="FormMessage";let sD=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,p.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});sD.displayName="Textarea";var sA=a(13590),sO=a(31229);let sz=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,p.cn)("w-full caption-bottom text-sm",a),...l})})});sz.displayName="Table";let sF=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("thead",{ref:s,className:(0,p.cn)("[&_tr]:border-b",a),...l})});sF.displayName="TableHeader";let sM=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,p.cn)("[&_tr:last-child]:border-0",a),...l})});sM.displayName="TableBody",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let sP=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tr",{ref:s,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});sP.displayName="TableRow";let sT=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("th",{ref:s,className:(0,p.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});sT.displayName="TableHead";let sY=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("td",{ref:s,className:(0,p.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});sY.displayName="TableCell",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("caption",{ref:s,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var sR=a(84190);let sU=sO.Ry({name:sO.Z_().min(2,"Name must be at least 2 characters"),base_cost:sO.Rx().min(0,"Base cost must be non-negative"),description:sO.Z_().optional()}),sI=()=>{let[e,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(""),{data:r,isLoading:n,error:m}=(0,sd.Wj)(),[x,{isLoading:u}]=(0,sd.Kk)(),h=(0,sg.cI)({resolver:(0,sA.F)(sU),defaultValues:{name:"",base_cost:0,description:""}}),p=l.useMemo(()=>r?r.filter(e=>{var s;return e.name.toLowerCase().includes(a.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase()))}):[],[r,a]);console.log(p);let j=async e=>{try{console.log(e),await x(e).unwrap(),s(!1),h.reset()}catch(e){console.error("Failed to create analysis type:",e)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-violet-700 via-purple-700 to-blue-700 bg-clip-text text-transparent",children:"Analysis Types"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Manage and create analysis types"})]}),(0,t.jsxs)(o.z,{onClick:()=>s(!0),className:"text-white transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Analysis Type"]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,t.jsx)(d.Zb,{className:"md:col-span-2 border-violet-100 hover:border-violet-200 transition-colors",children:(0,t.jsx)(d.Ol,{className:"pb-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(sp.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-violet-500"}),(0,t.jsx)(X.I,{placeholder:"Search analysis types...",value:a,onChange:e=>i(e.target.value),className:"pl-8 focus-visible:ring-violet-500 border-violet-100 hover:border-violet-200"})]})})}),(0,t.jsxs)(d.Zb,{className:"border-violet-100 hover:border-violet-200 transition-colors",children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsx)(d.ll,{className:"text-sm font-bold",children:"Total Types"})}),(0,t.jsxs)(d.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-blue-600 bg-clip-text text-transparent",children:(null==r?void 0:r.length)||0}),(0,t.jsx)("p",{className:"text-xs text-violet-500 mt-1",children:"Active analysis types"})]})]})]}),(0,t.jsxs)(d.Zb,{className:"h-fit border-violet-100 hover:border-violet-200 transition-colors",children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{className:"text-violet-700",children:"Analysis Types"}),(0,t.jsx)(d.SZ,{children:"All available analysis types and their configurations"})]}),(0,t.jsx)(d.aY,{children:n?(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)(eg.Z,{className:"h-6 w-6 animate-spin text-violet-600"})}):m?(0,t.jsxs)(G.bZ,{variant:"destructive",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.X,{children:"Failed to load analysis types. Please try again."})]}):(0,t.jsx)("div",{className:"rounded-md border border-violet-100",children:(0,t.jsxs)(sz,{children:[(0,t.jsx)(sF,{children:(0,t.jsxs)(sP,{className:"bg-gradient-to-r from-violet-50 to-blue-50",children:[(0,t.jsx)(sT,{className:"font-semibold text-violet-700",children:"Name"}),(0,t.jsx)(sT,{className:"font-semibold text-violet-700",children:"Description"}),(0,t.jsx)(sT,{className:"text-right font-semibold text-violet-700",children:"Base Cost"}),(0,t.jsx)(sT,{className:"w-[100px] font-semibold text-violet-700",children:"Actions"})]})}),(0,t.jsx)(sM,{children:p.map(e=>(0,t.jsxs)(sP,{className:"hover:bg-violet-50/50",children:[(0,t.jsx)(sY,{className:"font-medium ",children:e.name}),(0,t.jsx)(sY,{className:"",children:e.description||"-"}),(0,t.jsxs)(sY,{className:"text-right",children:[isNaN(Number(e.base_cost))?"0.00":Number(e.base_cost).toFixed(2)," credits"]}),(0,t.jsx)(sY,{children:(0,t.jsxs)(sR.h_,{children:[(0,t.jsx)(sR.$F,{asChild:!0,children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",className:"hover:bg-violet-100 hover:text-violet-700",children:(0,t.jsx)(eP.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(sR.AW,{align:"end",className:"border-violet-100",children:(0,t.jsxs)(sR.Xi,{className:"hover:bg-violet-50 hover:text-violet-700 cursor-pointer",children:[(0,t.jsx)(sj.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})})]})})]},e.id))})]})})})]}),(0,t.jsx)(e4.Vq,{open:e,onOpenChange:s,children:(0,t.jsxs)(e4.cZ,{className:"sm:max-w-[425px] border-violet-200",children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{className:"text-violet-700",children:"Create Analysis Type"}),(0,t.jsx)(e4.Be,{children:"Add a new type of analysis to the system"})]}),(0,t.jsx)(sf,{...h,children:(0,t.jsxs)("form",{onSubmit:h.handleSubmit(j),className:"space-y-4",children:[(0,t.jsx)(sN,{control:h.control,name:"name",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{className:"",children:"Name"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{placeholder:"Enter analysis type name",...s,className:"focus-visible:ring-violet-500 border-violet-100"})}),(0,t.jsx)(sk,{className:"text-red-500"})]})}}),(0,t.jsx)(sN,{control:h.control,name:"base_cost",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{className:"",children:"Base Cost (Credits)"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",placeholder:"0",...s,onChange:e=>s.onChange(parseFloat(e.target.value)),className:"focus-visible:ring-violet-500 border-violet-100"})}),(0,t.jsx)(sS,{className:"text-violet-500",children:"Cost in credits for this analysis type"}),(0,t.jsx)(sk,{className:"text-red-500"})]})}}),(0,t.jsx)(sN,{control:h.control,name:"description",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{className:"",children:"Description"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(sD,{placeholder:"Enter description",className:"resize-none focus-visible:ring-violet-500 border-violet-100",...s})}),(0,t.jsx)(sk,{className:"text-red-500"})]})}}),(0,t.jsxs)(e4.cN,{children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>s(!1),className:"border-violet-200 hover:bg-violet-50 text-violet-700",children:"Cancel"}),(0,t.jsxs)(o.z,{type:"submit",disabled:u,className:"bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white",children:[u&&(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})]})})]})};var sE=a(30401);let sL=(0,eK.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function sV(e){let{className:s,variant:a,...l}=e;return(0,t.jsx)("div",{className:(0,p.cn)(sL({variant:a}),s),...l})}var sB=a(12258),s$=a(85994),sW=a.n(s$);a(21005);let sH=sO.z.object({code:sO.z.string().min(3,"Code must be at least 3 characters"),coupon_type:sO.z.enum(["analysis_count","percentage","fixed"]),discount_value:sO.z.number().min(0,"Discount value must be non-negative"),allowed_user_types:sO.z.enum(["lecturer","institution"]),valid_from:sO.z.string().regex(/^(\d{4}-\d{2}-\d{2}( \d{2}:\d{2})?|\d{2}-\d{2}-\d{4}|\d{2}\/\d{2}\/\d{4})$/,"Invalid date format. Use YYYY-MM-DD, YYYY-MM-DD HH:mm, DD-MM-YYYY, or DD/MM/YYYY"),valid_until:sO.z.string().regex(/^(\d{4}-\d{2}-\d{2}( \d{2}:\d{2})?|\d{2}-\d{2}-\d{4}|\d{2}\/\d{2}\/\d{4})$/,"Invalid date format. Use YYYY-MM-DD, YYYY-MM-DD HH:mm, DD-MM-YYYY, or DD/MM/YYYY"),max_uses:sO.z.number().min(1,"Maximum uses must be at least 1"),is_active:sO.z.boolean().default(!0),minimum_credit_amount:sO.z.number().min(0,"Minimum credit amount must be non-negative"),analysis_types:sO.z.array(sO.z.string()).min(1,"Select at least one analysis type")}),sQ=e=>{let{open:s,onOpenChange:a,onSubmit:i}=e,[r,n]=(0,l.useState)("idle"),[c,d]=(0,l.useState)(null),m=(0,sg.cI)({resolver:(0,sA.F)(sH),defaultValues:{code:"",coupon_type:"percentage",discount_value:0,allowed_user_types:"lecturer",valid_from:(0,sm.WU)(new Date,"yyyy-MM-dd HH:mm"),valid_until:(0,sm.WU)(new Date(Date.now()+6048e5),"yyyy-MM-dd HH:mm"),max_uses:100,is_active:!0,minimum_credit_amount:0,analysis_types:[]}}),x=async e=>{try{n("creating"),d(null),await i(e),n("success"),setTimeout(()=>{a(!1),m.reset(),n("idle")},1500)}catch(e){var s;console.error("Failed to create coupon:",e),n("error"),d((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||Object.values((null==e?void 0:e.data)||{}).flat().join(", ")||"Failed to create coupon")}};return(0,t.jsx)(e4.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(e4.cZ,{className:"max-h-[90vh] overflow-y-auto lg:max-w-[800px]",children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{className:"text-violet-700",children:"Create New Coupon"}),(0,t.jsx)(e4.Be,{children:"Create a new discount coupon for users"})]}),(0,t.jsx)(sf,{...m,children:(0,t.jsxs)("form",{onSubmit:m.handleSubmit(x),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-4 lg:col-span-2",children:[(0,t.jsx)(sN,{control:m.control,name:"code",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Coupon Code"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{placeholder:"Enter coupon code",...s,className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sk,{})]})}}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsx)(sN,{control:m.control,name:"coupon_type",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Coupon Type"}),(0,t.jsxs)(Y.Ph,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(sZ,{children:(0,t.jsx)(Y.i4,{className:"focus:ring-violet-500",children:(0,t.jsx)(Y.ki,{placeholder:"Select coupon type"})})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"percentage",children:"Percentage"}),(0,t.jsx)(Y.Ql,{value:"fixed",children:"Fixed Amount"}),(0,t.jsx)(Y.Ql,{value:"analysis_count",children:"Analysis Count"})]})]}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"discount_value",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Discount Value"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sk,{})]})}})]}),(0,t.jsx)(sN,{control:m.control,name:"allowed_user_types",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Allowed User Types"}),(0,t.jsxs)(Y.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,t.jsx)(sZ,{children:(0,t.jsx)(Y.i4,{className:"focus:ring-violet-500",children:(0,t.jsx)(Y.ki,{placeholder:"Select user type"})})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"lecturer",children:"Lecturers Only"}),(0,t.jsx)(Y.Ql,{value:"institution",children:"Institutions Only"})]})]}),(0,t.jsx)(sk,{})]})}})]}),(0,t.jsx)(sN,{control:m.control,name:"valid_from",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsxs)(sC,{className:"flex items-center gap-2",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 text-violet-600"}),(0,t.jsx)("span",{children:"Valid From"})]}),(0,t.jsx)(sZ,{children:(0,t.jsx)(sW(),{selected:s.value?new Date(s.value):null,onChange:e=>{e&&s.onChange((0,sm.WU)(e,"yyyy-MM-dd HH:mm"))},showTimeSelect:!0,dateFormat:"yyyy-MM-dd HH:mm",className:"w-full rounded-md border-violet-100 focus:ring-violet-500",wrapperClassName:"w-full"})}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"valid_until",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsxs)(sC,{className:"flex items-center gap-2",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 text-violet-600"}),(0,t.jsx)("span",{children:"Valid Until"})]}),(0,t.jsx)(sZ,{children:(0,t.jsx)(sW(),{selected:s.value?new Date(s.value):null,onChange:e=>{e&&s.onChange((0,sm.WU)(e,"yyyy-MM-dd HH:mm"))},showTimeSelect:!0,dateFormat:"yyyy-MM-dd HH:mm",className:"w-full rounded-md border-violet-100 focus:ring-violet-500",minDate:new Date(m.watch("valid_from")),wrapperClassName:"w-full"})}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"max_uses",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Maximum Uses"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,onChange:e=>s.onChange(parseInt(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"minimum_credit_amount",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Minimum Credits"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(sN,{control:m.control,name:"analysis_types",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Analysis Types"}),(0,t.jsxs)(Y.Ph,{onValueChange:e=>s.onChange([...s.value,e]),value:s.value[s.value.length-1],children:[(0,t.jsx)(sZ,{children:(0,t.jsx)(Y.i4,{className:"focus:ring-violet-500",children:(0,t.jsx)(Y.ki,{placeholder:"Select analysis types"})})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"similarity",children:"Similarity Check"}),(0,t.jsx)(Y.Ql,{value:"grammar",children:"Grammar Check"}),(0,t.jsx)(Y.Ql,{value:"ai_detection",children:"AI Detection"})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:s.value.map(e=>(0,t.jsxs)(sV,{variant:"secondary",className:"cursor-pointer bg-violet-50 text-violet-700 hover:bg-violet-100",onClick:()=>s.onChange(s.value.filter(s=>s!==e)),children:[e,(0,t.jsx)(eF.Z,{className:"ml-1 h-3 w-3"})]},e))}),(0,t.jsx)(sk,{})]})}})})]}),c&&(0,t.jsxs)(G.bZ,{variant:"destructive",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.X,{children:c})]}),(0,t.jsxs)(e4.cN,{className:"gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>a(!1),className:"border-violet-200 hover:bg-violet-50",children:"Cancel"}),(()=>{switch(r){case"creating":return(0,t.jsxs)(o.z,{type:"submit",disabled:!0,className:"bg-gradient-to-r from-violet-600 to-blue-600",children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]});case"success":return(0,t.jsxs)(o.z,{type:"submit",disabled:!0,className:"bg-green-600",children:[(0,t.jsx)(sE.Z,{className:"mr-2 h-4 w-4"}),"Created!"]});case"error":return(0,t.jsx)(o.z,{type:"submit",className:"bg-gradient-to-r from-violet-600 to-blue-600",children:"Try Again"});default:return(0,t.jsx)(o.z,{type:"submit",className:"bg-gradient-to-r from-violet-600 to-blue-600",children:"Create Coupon"})}})()]})]})})]})})},sK=e=>{let{open:s,onOpenChange:a,onRevoke:i,revokeReason:r,onReasonChange:n,selectedCouponCode:c}=e,d=(0,sg.cI)({defaultValues:{reason:r}});l.useEffect(()=>{d.setValue("reason",r)},[r,d]);let m=async e=>{n(e.reason),await i()};return(0,t.jsx)(e4.Vq,{open:s,onOpenChange:a,children:(0,t.jsx)(e4.cZ,{className:"sm:max-w-[425px]",children:(0,t.jsx)(sf,{...d,children:(0,t.jsxs)("form",{onSubmit:d.handleSubmit(m),children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{className:"text-violet-700",children:"Revoke Coupon"}),(0,t.jsxs)(e4.Be,{children:["Are you sure you want to revoke ",c?'coupon "'.concat(c,'"'):"this coupon","? This action cannot be undone."]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsx)(sN,{control:d.control,name:"reason",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Reason for Revocation"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(sD,{placeholder:"Enter reason for revoking the coupon",className:"focus-visible:ring-violet-500 resize-none min-h-[100px]",...s})})]})}})}),(0,t.jsxs)(e4.cN,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>a(!1),className:"border-violet-200 hover:bg-violet-50",children:"Cancel"}),(0,t.jsx)(o.z,{type:"submit",variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:"Revoke Coupon"})]})]})})})})},sq=()=>{let[e,s]=(0,l.useState)("all"),[a,i]=(0,l.useState)({}),[r,n]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null),[p,j]=(0,l.useState)(""),[v,g]=(0,l.useState)(""),{data:f,isLoading:N}=(0,J.DO)(a),{data:b,isLoading:w}=(0,J.Ms)({});console.log("allCoupons:",f);let[_]=(0,J.wr)(),[C]=(0,J.aX)(),Z=async e=>{try{await _(e).unwrap(),n(!1)}catch(e){console.error("Failed to create coupon:",e)}},S=async()=>{if(u)try{await C({coupon_code:u,reason:p}).unwrap(),x(!1),h(null),j("")}catch(e){console.error("Failed to revoke coupon:",e)}},k=e=>(0,t.jsxs)(d.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(d.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.ll,{className:"text-lg",children:e.coupon_details.code}),(0,t.jsxs)(d.SZ,{children:["percentage"===e.coupon_details.coupon_type&&"".concat(e.coupon_details.discount_value,"% off"),"fixed"===e.coupon_details.coupon_type&&"$".concat(e.coupon_details.discount_value," off"),"analysis_count"===e.coupon_details.coupon_type&&"".concat(e.coupon_details.discount_value," free analyses")]})]}),(0,t.jsxs)(sV,{variant:"active"===e.status?"secondary":"expired"===e.status?"outline":"revoked"===e.status?"destructive":"secondary",className:"flex items-center gap-1",children:["active"===e.status&&(0,t.jsx)(sE.Z,{className:"h-3 w-3"}),e.status]})]})}),(0,t.jsxs)(d.aY,{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Uses"}),(0,t.jsx)("span",{children:e.usage_info?"".concat(e.usage_info.total_uses,"/").concat(e.coupon_details.max_uses):"".concat(e.coupon_details.current_uses,"/").concat(e.coupon_details.max_uses)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center",children:[(0,t.jsx)(Q.Z,{className:"h-4 w-4 mr-1"}),"Expires"]}),(0,t.jsx)("span",{children:e.coupon_details.expires_at?(0,sm.WU)((0,sB.D)(e.coupon_details.expires_at),"MMM dd, yyyy"):"No expiration"})]}),"active"===e.status&&(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(o.z,{variant:"destructive",size:"sm",onClick:()=>{h(e.coupon_details.code),x(!0)},children:"Revoke"})})]})]},e.coupon_details.id),D=l.useMemo(()=>(null==f?void 0:f.coupons)?f.coupons.filter(e=>e.coupon_details.code.toLowerCase().includes(v.toLowerCase())):[],[f,v]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-violet-700",children:"Coupon Management"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Create and manage discount coupons"})]}),(0,t.jsxs)(o.z,{onClick:()=>n(!0),className:"hover:bg-gray-950 bg-gray-900",children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Coupon"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Total Coupons"})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.summary.total_coupons)||0})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eY.Z,{className:"h-4 w-4 text-violet-500"}),(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Active Users"})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==b?void 0:b.summary.total_active_users)||0})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Active Coupons"})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.summary.active_coupons)||0})})]})]}),(0,t.jsx)(d.Zb,{children:(0,t.jsx)(d.aY,{className:"p-6",children:(0,t.jsxs)(e6.mQ,{defaultValue:"all",className:"w-full",onValueChange:s,children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-6",children:[(0,t.jsxs)(e6.dr,{className:"bg-violet-50",children:[(0,t.jsx)(e6.SP,{value:"all",className:"data-[state=active]:bg-violet-600 data-[state=active]:text-white",children:"All Coupons"}),(0,t.jsx)(e6.SP,{value:"active",className:"data-[state=active]:bg-violet-600 data-[state=active]:text-white",children:"Active"}),(0,t.jsx)(e6.SP,{value:"expired",className:"data-[state=active]:bg-violet-600 data-[state=active]:text-white",children:"Expired"}),(0,t.jsx)(e6.SP,{value:"revoked",className:"data-[state=active]:bg-violet-600 data-[state=active]:text-white",children:"Revoked"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(sp.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,t.jsx)(X.I,{placeholder:"Search coupons...",value:v,onChange:e=>g(e.target.value),className:"pl-8"})]}),(0,t.jsxs)(sR.h_,{children:[(0,t.jsx)(sR.$F,{asChild:!0,children:(0,t.jsx)(o.z,{variant:"outline",size:"icon",children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(sR.AW,{align:"end",className:"w-[200px]",children:[(0,t.jsx)(sR.Xi,{children:"All Types"}),(0,t.jsx)(sR.Xi,{children:"Percentage"}),(0,t.jsx)(sR.Xi,{children:"Fixed Amount"}),(0,t.jsx)(sR.Xi,{children:"Analysis Count"})]})]})]})]}),(0,t.jsx)(e6.nU,{value:"all",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:N?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):D.map(e=>(0,t.jsx)("div",{children:k({coupon_details:{...e.coupon_details,expires_at:e.coupon_details.valid_until},status:e.status,usage_info:e.usage_info})},e.coupon_details.code))})}),(0,t.jsx)(e6.nU,{value:"active",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:w?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):Object.entries((null==b?void 0:b.all_active_coupons)||{}).map(e=>{let[s,a]=e;return a.map(e=>(0,t.jsx)("div",{children:k({coupon_details:{...e,expires_at:e.valid_until},status:"active"})},e.code))})})}),(0,t.jsx)(e6.nU,{value:"expired",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:w?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):Object.entries((null==b?void 0:b.all_active_coupons)||{}).map(e=>{let[s,a]=e;return a.map(e=>(0,t.jsx)("div",{children:k({coupon_details:{...e,expires_at:e.valid_until},status:"expired"})},e.code))})})}),(0,t.jsx)(e6.nU,{value:"revoked",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:w?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):Object.entries((null==b?void 0:b.all_active_coupons)||{}).map(e=>{let[s,a]=e;return a.map(e=>(0,t.jsx)("div",{children:k({coupon_details:{...e,expires_at:e.valid_until},status:"revoked"})},e.code))})})})]})})}),(0,t.jsx)(sQ,{open:r,onOpenChange:n,onSubmit:Z}),(0,t.jsx)(sK,{open:m,onOpenChange:x,onRevoke:S,revokeReason:p,onReasonChange:j,selectedCouponCode:u})]})},sX=sO.Ry({min_credits:sO.Rx().min(1,"Minimum credits must be at least 1"),max_credits:sO.Rx().nullable().optional(),price_per_credit:sO.Rx().min(.01,"Price per credit must be at least 0.01"),is_active:sO.O7().default(!0)}),sG=e=>{let{open:s,onOpenChange:a,onSubmit:i}=e,[r,n]=(0,l.useState)("idle"),[c,d]=(0,l.useState)(null),m=(0,sg.cI)({resolver:(0,sA.F)(sX),defaultValues:{min_credits:1,max_credits:null,price_per_credit:.5,is_active:!0}}),x=async e=>{try{n("creating"),await i(e),n("success"),setTimeout(()=>{a(!1),m.reset(),n("idle")},1500)}catch(e){console.error("Failed to create pricing tier:",e),n("idle")}};return(0,t.jsx)(e4.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(e4.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{className:"text-lg font-semibold bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Create New Pricing Tier"}),(0,t.jsx)(e4.Be,{children:"Set up a new credit pricing tier with specific credit ranges and pricing"})]}),(0,t.jsx)(sf,{...m,children:(0,t.jsxs)("form",{onSubmit:m.handleSubmit(x),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 grid-cols-2",children:[(0,t.jsx)(sN,{control:m.control,name:"min_credits",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Minimum Credits"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sS,{children:"Starting credit amount for this tier"}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"max_credits",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Maximum Credits (Optional)"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,value:s.value||"",onChange:e=>{let a=e.target.value;s.onChange(""===a?null:Number(a))},className:"focus-visible:ring-violet-500",placeholder:"Leave empty for unlimited"})}),(0,t.jsx)(sS,{children:"Upper limit for this tier (optional)"}),(0,t.jsx)(sk,{})]})}})]}),(0,t.jsx)(sN,{control:m.control,name:"price_per_credit",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Price per Credit"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",step:"0.01",...s,onChange:e=>s.onChange(Number(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sS,{children:"Cost per credit in this tier ($)"}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:m.control,name:"is_active",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(sC,{children:"Active Status"}),(0,t.jsx)(sS,{children:"Make this pricing tier available immediately"})]}),(0,t.jsx)(sZ,{children:(0,t.jsx)(ep,{checked:s.value,onCheckedChange:s.onChange})})]})}}),c&&(0,t.jsxs)(G.bZ,{variant:"destructive",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.X,{children:c})]}),(0,t.jsxs)(e4.cN,{className:"gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>a(!1),className:"border-violet-200 hover:bg-violet-50",children:"Cancel"}),(()=>{switch(r){case"creating":return(0,t.jsxs)(o.z,{type:"submit",disabled:!0,className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600",children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]});case"success":return(0,t.jsxs)(o.z,{type:"submit",disabled:!0,className:"bg-green-600",children:[(0,t.jsx)(sE.Z,{className:"mr-2 h-4 w-4"}),"Created!"]});case"error":return(0,t.jsx)(o.z,{type:"submit",className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600",children:"Try Again"});default:return(0,t.jsx)(o.z,{type:"submit",className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600",children:"Create Tier"})}})()]})]})})]})})},sJ=sO.Ry({min_credits:sO.Rx().min(1,"Minimum credits must be at least 1"),max_credits:sO.Rx().nullable().optional(),price_per_credit:sO.Rx().min(.01,"Price per credit must be at least 0.01"),is_active:sO.O7()}),s0=e=>{let{open:s,onOpenChange:a,onSubmit:i,tier:r}=e,[n,c]=(0,l.useState)("idle"),[d,m]=(0,l.useState)(null),x=(0,sg.cI)({resolver:(0,sA.F)(sJ),defaultValues:{min_credits:Number(r.min_credits),max_credits:r.max_credits?Number(r.max_credits):null,price_per_credit:Number(r.price_per_credit),is_active:r.is_active}});(0,l.useEffect)(()=>{x.reset({min_credits:Number(r.min_credits),max_credits:r.max_credits?Number(r.max_credits):null,price_per_credit:Number(r.price_per_credit),is_active:r.is_active})},[r,x.reset]);let u=async e=>{try{c("updating"),m(null),await i(e),c("success"),setTimeout(()=>{a(!1),c("idle")},1500)}catch(e){var s;c("error"),m((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||Object.values((null==e?void 0:e.data)||{}).flat().join(", ")||"Failed to update pricing tier")}};return(0,t.jsx)(e4.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(e4.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(e4.fK,{children:[(0,t.jsx)(e4.$N,{className:"text-lg font-semibold bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Edit Pricing Tier"}),(0,t.jsx)(e4.Be,{children:"Modify the credit pricing tier settings"})]}),(0,t.jsx)(sf,{...x,children:(0,t.jsxs)("form",{onSubmit:x.handleSubmit(u),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 grid-cols-2",children:[(0,t.jsx)(sN,{control:x.control,name:"min_credits",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Minimum Credits"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...s,onChange:e=>s.onChange(Number(e.target.value)),className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sS,{children:"Starting credit amount for this tier"}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:x.control,name:"max_credits",render:e=>{var s;let{field:a}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Maximum Credits (Optional)"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",...a,value:null!==(s=a.value)&&void 0!==s?s:"",onChange:e=>{let s=e.target.value;a.onChange(""===s?null:Number(s))},className:"focus-visible:ring-violet-500",placeholder:"Leave empty for unlimited"})}),(0,t.jsx)(sS,{children:"Upper limit for this tier (optional)"}),(0,t.jsx)(sk,{})]})}})]}),(0,t.jsx)(sN,{control:x.control,name:"price_per_credit",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{children:[(0,t.jsx)(sC,{children:"Price per Credit"}),(0,t.jsx)(sZ,{children:(0,t.jsx)(X.I,{type:"number",step:"0.01",...s,onChange:e=>s.onChange(Number(e.target.value)),value:s.value||"",className:"focus-visible:ring-violet-500"})}),(0,t.jsx)(sS,{children:"Cost per credit in this tier ($)"}),(0,t.jsx)(sk,{})]})}}),(0,t.jsx)(sN,{control:x.control,name:"is_active",render:e=>{let{field:s}=e;return(0,t.jsxs)(s_,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(sC,{children:"Active Status"}),(0,t.jsx)(sS,{children:"Make this pricing tier available immediately"})]}),(0,t.jsx)(sZ,{children:(0,t.jsx)(ep,{checked:s.value,onCheckedChange:s.onChange})})]})}}),d&&(0,t.jsxs)(G.bZ,{variant:"destructive",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"}),(0,t.jsx)(G.X,{children:d})]}),(0,t.jsxs)(e4.cN,{className:"gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>a(!1),className:"border-violet-200 hover:bg-violet-50",children:"Cancel"}),(0,t.jsx)(o.z,{type:"submit",disabled:"updating"===n,className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600",children:"updating"===n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"success"===n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sE.Z,{className:"mr-2 h-4 w-4"}),"Updated!"]}):"Update Tier"})]})]})})]})})},s2=()=>{let[e,s]=(0,l.useState)("all"),[a,i]=(0,l.useState)(!1),[r,n]=(0,l.useState)(""),[x,u]=(0,l.useState)(null),{data:h,isLoading:p}=(0,L.n9)({}),[j]=(0,L.eC)(),[v]=(0,L.er)(),[g,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)(null),b=e=>{N(e),f(!0)},_=async e=>{if(y)try{await v({tier_id:y.id,data:e}).unwrap(),f(!1)}catch(e){throw console.error("Failed to update pricing tier:",e),e}},C=async e=>{try{u(e.id),await v({tier_id:e.id,data:{min_credits:e.min_credits,price_per_credit:e.price_per_credit,max_credits:e.max_credits,is_active:!e.is_active}}).unwrap()}catch(e){console.error("Failed to toggle tier status:",e)}finally{u(null)}},Z=e=>(0,t.jsxs)(d.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(d.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.ll,{className:"text-lg",children:e.max_credits?"".concat(e.min_credits," - ").concat(e.max_credits," Credits"):"".concat(e.min_credits,"+ Credits")}),(0,t.jsxs)(d.SZ,{children:["$",e.price_per_credit," per credit"]})]}),(0,t.jsx)(sV,{variant:e.is_active?"secondary":"outline",className:"bg-gradient-to-r from-violet-100 to-blue-100 text-violet-700",children:e.is_active?"Active":"Inactive"})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Price Range"}),(0,t.jsxs)("span",{children:["$",(e.min_credits*e.price_per_credit).toFixed(2)," -",e.max_credits?" $".concat((e.max_credits*e.price_per_credit).toFixed(2)):" No limit"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created"}),(0,t.jsx)("span",{children:(0,sm.WU)(new Date(e.created_at),"MMM dd, yyyy")})]}),(0,t.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>b(e),className:"border-violet-200 hover:bg-violet-50",children:"Edit"}),(0,t.jsx)(o.z,{variant:e.is_active?"destructive":"default",size:"sm",onClick:()=>C(e),className:e.is_active?"":"bg-gradient-to-r from-violet-600 to-blue-600",children:x===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),e.is_active?"Deactivating...":"Activating..."]}):e.is_active?"Deactivate":"Activate"})]})]})})]}),S=async e=>{try{await j(e).unwrap(),ej.ZP.success("Pricing tier created successfully"),i(!1)}catch(e){var s;ej.ZP.error((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to create pricing tier")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Credit Management"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Manage credit pricing and tiers"})]}),(0,t.jsxs)(o.z,{onClick:()=>i(!0),className:"bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600",children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Pricing Tier"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-violet-500"}),(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Active Tiers"})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==h?void 0:h.filter(e=>e.is_active).length)||0})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eY.Z,{className:"h-4 w-4 text-violet-500"}),(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Total Users"})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:"0"})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 text-violet-500"}),(0,t.jsx)(d.ll,{className:"text-sm font-medium",children:"Total Revenue"})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:"$0.00"})})]})]}),(0,t.jsx)(d.Zb,{children:(0,t.jsx)(d.aY,{className:"p-6",children:(0,t.jsxs)(e6.mQ,{defaultValue:"all",className:"w-full",onValueChange:s,children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-6",children:[(0,t.jsxs)(e6.dr,{className:"bg-gradient-to-r from-violet-50 via-purple-50 to-blue-50",children:[(0,t.jsx)(e6.SP,{value:"all",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-violet-600 data-[state=active]:via-purple-600 data-[state=active]:to-blue-600 data-[state=active]:text-white",children:"All Tiers"}),(0,t.jsx)(e6.SP,{value:"active",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-violet-600 data-[state=active]:via-purple-600 data-[state=active]:to-blue-600 data-[state=active]:text-white",children:"Active"}),(0,t.jsx)(e6.SP,{value:"inactive",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-violet-600 data-[state=active]:via-purple-600 data-[state=active]:to-blue-600 data-[state=active]:text-white",children:"Inactive"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(sp.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,t.jsx)(X.I,{placeholder:"Search tiers...",value:r,onChange:e=>n(e.target.value),className:"pl-8"})]})]}),(0,t.jsx)(e6.nU,{value:"all",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:p?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):null==h?void 0:h.map(e=>(0,t.jsx)("div",{children:Z(e)},e.id))})}),(0,t.jsx)(e6.nU,{value:"active",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:p?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):null==h?void 0:h.filter(e=>e.is_active).map(e=>(0,t.jsx)("div",{children:Z(e)},e.id))})}),(0,t.jsx)(e6.nU,{value:"inactive",className:"mt-0",children:(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:p?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)(eg.Z,{className:"h-8 w-8 animate-spin text-violet-600"})}):null==h?void 0:h.filter(e=>!e.is_active).map(e=>(0,t.jsx)("div",{children:Z(e)},e.id))})})]})})}),(0,t.jsx)(sG,{open:a,onOpenChange:i,onSubmit:S}),y&&(0,t.jsx)(s0,{open:g,onOpenChange:f,onSubmit:_,tier:y})]})};var s4=a(43667);let s5=s4.zt,s6=s4.fC,s1=s4.xz,s3=l.forwardRef((e,s)=>{let{className:a,sideOffset:l=4,...i}=e;return(0,t.jsx)(s4.h_,{children:(0,t.jsx)(s4.VY,{ref:s,sideOffset:l,className:(0,p.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});function s8(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,p.cn)("animate-pulse rounded-md bg-primary/10",s),...a})}s3.displayName=s4.VY.displayName;var s7=a(32660),s9=a(18930),ae=a(50408);let as=ae.fC;ae.xz;let aa=ae.h_,at=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ae.aV,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:s})});at.displayName=ae.aV.displayName;let al=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsxs)(aa,{children:[(0,t.jsx)(at,{}),(0,t.jsx)(ae.VY,{ref:s,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});al.displayName=ae.VY.displayName;let ai=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};ai.displayName="AlertDialogHeader";let ar=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};ar.displayName="AlertDialogFooter";let an=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ae.Dx,{ref:s,className:(0,p.cn)("text-lg font-semibold",a),...l})});an.displayName=ae.Dx.displayName;let ac=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ae.dk,{ref:s,className:(0,p.cn)("text-sm text-muted-foreground",a),...l})});ac.displayName=ae.dk.displayName;let ao=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ae.aU,{ref:s,className:(0,p.cn)((0,o.d)(),a),...l})});ao.displayName=ae.aU.displayName;let ad=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ae.$j,{ref:s,className:(0,p.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});ad.displayName=ae.$j.displayName;var am=a(22212),ax=a(35607);let au=e=>Object.entries(e).reduce((e,s)=>{let[a,t]=s;return a.endsWith("_mark")&&"number"==typeof t&&(e[a.replace("_mark","")]=t),e},{}),ah=e=>Object.entries(e).reduce((e,s)=>{let[a,t]=s;return a.endsWith("_feedback")&&"string"==typeof t&&(e[a.replace("_feedback","")]=t),e},{}),ap=e=>({abstract:.05,introduction:.05,literature_review:.2,methodology:.1,results_findings:.25,conclusions_recommendations:.1,references:.05,readability:.2,functionality:.2,efficiency:.2,error_handling:.2,modularity:.2})[e.toLowerCase().replace(/ /g,"_")]||.1,aj=e=>Object.entries(e).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).map((e,s)=>{let[a,t]=e;return{id:"".concat(a,"-").concat(s),name:a.replace(/_/g," "),score:t,calculatedScore:t*ap(a),weight:100*ap(a)}}),av=e=>Object.entries(e).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s,l=ap(a);return e+Number(t)*l},0);var ag=a(24457),af=a.n(ag),ay=a(53375),aN=e=>{let{analysis:s,marking:a,feedback:l,totalScore:i,chartData:r}=e;return console.log("Download View Values:",{marking:a,chartData:r,totalScore:i,weightedTotal:Object.entries(a).reduce((e,s)=>{let[a,t]=s,l=ap(a);return e+Number(t)*l},0),rawTotal:Object.values(a).reduce((e,s)=>e+Number(s),0)}),(0,t.jsxs)("div",{className:"space-y-8 p-8",id:"download-content",children:[(0,t.jsxs)("div",{className:"page-break-after",children:[(0,t.jsxs)(d.Zb,{className:" border border-indigo-100 mb-5",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:["code"===s.analysis_type?"Code":"Thesis"," Analysis Details"]})}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"File Name"}),(0,t.jsx)("p",{className:"text-gray-600",children:s.file_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-medium text-right",children:["Overall Score (",(0,t.jsx)("span",{className:"text-indigo-600",children:"out of 100%"}),")"]}),(0,t.jsxs)("p",{className:"text-2xl font-semibold bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:[av(a).toFixed(1),"%"]})]})]})})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(am.Z,{data:r})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Detailed Feedback"}),(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(a).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).map(e=>{let[s,a]=e;return(0,t.jsxs)(d.Zb,{className:"border border-gray-200",children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"capitalize text-indigo-700",children:s.replace(/_/g," ")}),(0,t.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:[a.toFixed(1),"%"]})]})}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"prose max-w-none",children:[(0,t.jsx)("h4",{className:"text-gray-700 font-medium mb-2",children:"Feedback:"}),(0,t.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:l[s]})]})})]},s)})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(ax.Z,{chartData:r,totalScore:i,actualScore:Object.entries(a).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s,l=ap(a);return e+Number(t)*l},0),isEditing:!1})})]}),(0,t.jsx)("div",{className:"text-center text-gray-500 text-sm mt-8 pt-8 border-t",children:(0,t.jsxs)("p",{children:["Generated on ",new Date().toLocaleDateString()]})})]})},ab=e=>{let{analysis:s,onBack:a}=e,[i,r]=(0,l.useState)(!1),[n,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)(s),[u,h]=(0,l.useState)([]),[p,{isLoading:j}]=(0,sd.gF)(),v=au(m),g=ah(m),f=av(v);console.log("Detail Page Values:",{marking:v,chartData:u,totalScore:f,weightedTotal:Object.entries(v).reduce((e,s)=>{let[a,t]=s,l=ap(a);return e+Number(t)*l},0),rawTotal:Object.values(v).reduce((e,s)=>e+Number(s),0)});let[y,{isLoading:b}]=(0,sd.pv)();(0,l.useEffect)(()=>{h(aj(au(m)))},[m]);let w=async()=>{try{await y({analysis_id:m.id,analysis_type:m.analysis_type,data:m}).unwrap(),ej.Am.success("Analysis updated successfully"),r(!1)}catch(e){console.error("Error updating analysis:",e)}},_=(e,s)=>{x(a=>({...a,["".concat(e,"_mark")]:Number(s)}))},C=(e,s)=>{x(a=>({...a,["".concat(e,"_feedback")]:s}))},Z=async()=>{try{c(!1),a(),await p({analysis_id:m.id,analysis_type:m.analysis_type}).unwrap(),ej.Am.success("Analysis deleted successfully")}catch(e){console.error("Error deleting analysis:",e),ej.Am.error("Failed to delete analysis")}},S=async()=>{try{let e=document.getElementById("download-content");if(!e)return;let s=await af()(e,{scale:2,backgroundColor:"#ffffff",windowWidth:e.scrollWidth,windowHeight:e.scrollHeight}),a=s.toDataURL("image/png"),t=new ay.ZP({orientation:"portrait",unit:"mm",format:"a4"}),l=t.internal.pageSize.getWidth(),i=t.internal.pageSize.getHeight(),r=s.width,n=s.height,c=Math.min(l/r,i/n),o=(l-r*c)/2,d=Math.ceil(n*c/i);for(let e=0;e<d;e++)e>0&&t.addPage(),t.addImage(a,"PNG",o,-(e*i),r*c,n*c);t.save("".concat(m.file_name,"-analysis.pdf"))}catch(e){console.error("Error generating PDF:",e)}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)(o.z,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[(0,t.jsx)(s7.Z,{className:"w-4 h-4"}),"Back"]}),!i&&(0,t.jsxs)(o.z,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"w-4 h-4"}),"Download PDF"]}),(0,t.jsx)("div",{className:"flex gap-2",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.z,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsx)(o.z,{onClick:w,disabled:b,className:"bg-gradient-to-r from-violet-600 to-blue-600 text-white",children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ef.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.z,{variant:"outline",onClick:()=>{r(!0)},children:"Edit Analysis"}),(0,t.jsx)(o.z,{variant:"destructive",onClick:()=>c(!0),children:(0,t.jsx)(s9.Z,{className:"w-4 h-4"})})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.Zb,{className:"".concat(i?"":"hidden"," border border-indigo-100"),children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:["code"===m.analysis_type?"Code":"Thesis"," Analysis Details"]})}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"File Name"}),(0,t.jsx)("p",{className:"text-gray-600",children:m.file_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-right",children:"Overall Score"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:[Number(f).toFixed(1),"%"]})]})]})})]}),(0,t.jsx)("div",{className:"".concat(i?"":"hidden"," border border-indigo-100"),children:(0,t.jsx)(am.Z,{data:u})}),i?(0,t.jsxs)("div",{className:"space-y-6",children:[" ",(0,t.jsx)("div",{className:"w-full space-y-6",children:Object.entries(v).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).map(e=>{let[s,a]=e;return(0,t.jsxs)(d.Zb,{className:"bg-white/90 backdrop-blur-sm border border-indigo-100",children:[(0,t.jsx)(d.Ol,{className:"pb-2",children:(0,t.jsx)(d.ll,{className:"text-lg font-semibold capitalize text-indigo-700",children:s.replace(/_/g," ")})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Score"}),(0,t.jsx)(X.I,{type:"number",value:a,onChange:e=>_(s,e.target.value),disabled:!i,min:"0",max:"100",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Feedback"}),(0,t.jsx)(sD,{value:g[s],onChange:e=>C(s,e.target.value),disabled:!i,className:"mt-1"})]})]})]},s)})}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(ax.Z,{chartData:u,actualScore:f,totalScore:Object.entries(v).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s;return e+t},0),isEditing:i,onScoreChange:_})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[" ",(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(aN,{analysis:m,marking:v,feedback:g,totalScore:Object.entries(v).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s;return e+t},0),chartData:u})}),(0,t.jsx)("div",{className:"w-full hidden",children:(0,t.jsx)(ax.Z,{chartData:u,actualScore:f,totalScore:Object.entries(v).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s;return e+t},0),isEditing:i,onScoreChange:_})}),(0,t.jsx)("div",{className:"hidden",children:(0,t.jsx)("div",{id:"download-content",children:(0,t.jsx)(aN,{analysis:m,marking:v,feedback:g,totalScore:Object.entries(v).filter(e=>{let[s]=e;return"overall"!==s.toLowerCase()}).reduce((e,s)=>{let[a,t]=s;return e+t},0),chartData:u})})})]})]}),(0,t.jsx)(as,{open:n,onOpenChange:c,children:(0,t.jsxs)(al,{children:[(0,t.jsxs)(ai,{children:[(0,t.jsx)(an,{children:"Are you sure?"}),(0,t.jsx)(ac,{children:"This action cannot be undone. This will permanently delete your analysis."})]}),(0,t.jsxs)(ar,{children:[(0,t.jsx)(ad,{children:"Cancel"}),(0,t.jsx)(ao,{onClick:Z,className:"bg-red-600 hover:bg-red-700",disabled:j,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},aw=()=>{let[e,s]=(0,l.useState)(""),[a,i]=(0,l.useState)("all"),[r,n]=(0,l.useState)("newest"),[c,m]=(0,l.useState)("list"),[x,u]=(0,l.useState)(null),{data:h,isLoading:p,error:j}=(0,sd.wu)(),v=l.useMemo(()=>h?[...h.thesis,...h.code].filter(s=>{let t=s.file_name.toLowerCase().includes(e.toLowerCase()),l="all"===a||s.analysis_type===a;return t&&l}).sort((e,s)=>"newest"===r?new Date(s.created_at).getTime()-new Date(e.created_at).getTime():new Date(e.created_at).getTime()-new Date(s.created_at).getTime()):[],[h,e,a,r]),g=e=>{u(e),m("detail")},f=e=>"thesis"===e?"bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-200":"bg-gradient-to-r from-violet-50 to-blue-50 text-violet-700 border border-violet-200";return j?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)(d.Zb,{className:"p-6 border-red-200",children:(0,t.jsx)("p",{className:"text-red-500",children:"Error loading analyses. Please try again later."})})}):"detail"===c&&x?(0,t.jsx)(ab,{analysis:x,onBack:()=>{m("list"),u(null)}}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,t.jsxs)("div",{className:"relative rounded-lg bg-gradient-to-r from-violet-500 via-indigo-500 to-purple-500 p-6 text-white",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/5 rounded-lg backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight mb-2",children:"Saved Analysis"}),(0,t.jsx)("p",{className:"text-violet-100",children:"View and manage your collection of analyses"})]})]}),(0,t.jsx)(d.Zb,{className:"border-indigo-100",children:(0,t.jsx)(d.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:space-x-4 md:space-y-0",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(sp.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-indigo-400"}),(0,t.jsx)(X.I,{placeholder:"Search analyses...",className:"pl-8 border-indigo-200 focus:border-indigo-400 focus:ring-indigo-300",value:e,onChange:e=>s(e.target.value)})]}),(0,t.jsxs)(Y.Ph,{value:a,onValueChange:e=>i(e),children:[(0,t.jsx)(Y.i4,{className:"w-[180px] border-indigo-200",children:(0,t.jsx)(Y.ki,{placeholder:"Filter by type"})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"all",children:"All Types"}),(0,t.jsx)(Y.Ql,{value:"thesis",children:"Thesis"}),(0,t.jsx)(Y.Ql,{value:"code",children:"Code"})]})]}),(0,t.jsxs)(Y.Ph,{value:r,onValueChange:e=>n(e),children:[(0,t.jsx)(Y.i4,{className:"w-[180px] border-indigo-200",children:(0,t.jsx)(Y.ki,{placeholder:"Sort by"})}),(0,t.jsxs)(Y.Bw,{children:[(0,t.jsx)(Y.Ql,{value:"newest",children:"Newest First"}),(0,t.jsx)(Y.Ql,{value:"oldest",children:"Oldest First"})]})]})]})})}),(0,t.jsx)(d.Zb,{className:"border-indigo-100",children:(0,t.jsx)(d.aY,{className:"p-0",children:(0,t.jsxs)(sz,{children:[(0,t.jsx)(sF,{children:(0,t.jsxs)(sP,{className:"bg-gradient-to-r from-violet-50 to-indigo-50 hover:from-violet-100 hover:to-indigo-100",children:[(0,t.jsx)(sT,{className:"text-indigo-600",children:"File Name"}),(0,t.jsx)(sT,{className:"text-indigo-600",children:"Type"}),(0,t.jsx)(sT,{className:"text-indigo-600",children:"Date"}),(0,t.jsx)(sT,{className:"text-indigo-600 text-right",children:"Actions"})]})}),(0,t.jsx)(sM,{children:p?[,,,,,].fill(0).map((e,s)=>(0,t.jsxs)(sP,{children:[(0,t.jsx)(sY,{children:(0,t.jsx)(s8,{className:"h-4 w-[200px]"})}),(0,t.jsx)(sY,{children:(0,t.jsx)(s8,{className:"h-4 w-[100px]"})}),(0,t.jsx)(sY,{children:(0,t.jsx)(s8,{className:"h-4 w-[60px]"})}),(0,t.jsx)(sY,{children:(0,t.jsx)(s8,{className:"h-4 w-[120px]"})}),(0,t.jsx)(sY,{children:(0,t.jsx)(s8,{className:"h-4 w-[80px]"})})]},s)):0===v.length?(0,t.jsx)(sP,{children:(0,t.jsx)(sY,{colSpan:5,className:"text-center py-12",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-gradient-to-r from-violet-100 to-indigo-100",children:(0,t.jsx)(ei.Z,{className:"h-6 w-6 text-indigo-600"})}),(0,t.jsx)("p",{className:"text-indigo-600 font-medium",children:"No analyses found"}),(0,t.jsx)("p",{className:"text-indigo-400 text-sm",children:"Try adjusting your filters"})]})})}):v.map(e=>(0,t.jsxs)(sP,{className:"cursor-pointer hover:bg-gradient-to-r hover:from-violet-50/50 hover:to-indigo-50/50 transition-colors",children:[(0,t.jsx)(sY,{className:"font-medium text-indigo-900",children:e.file_name}),(0,t.jsx)(sY,{children:(0,t.jsxs)(sV,{variant:"secondary",className:f(e.analysis_type),children:["thesis"===e.analysis_type?(0,t.jsx)(ei.Z,{className:"mr-1 h-3 w-3"}):(0,t.jsx)(er.Z,{className:"mr-1 h-3 w-3"}),e.analysis_type]})}),(0,t.jsx)(sY,{children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-indigo-600",children:[(0,t.jsx)(_.Z,{className:"mr-1 h-3 w-3"}),(0,sm.WU)(new Date(e.created_at),"MMM dd, yyyy")]})}),(0,t.jsx)(sY,{className:"text-right",children:(0,t.jsx)(s5,{children:(0,t.jsxs)(s6,{children:[(0,t.jsx)(s1,{asChild:!0,children:(0,t.jsx)(o.z,{variant:"ghost",size:"icon",className:"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50",onClick:()=>g(e),children:(0,t.jsx)(ew.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(s3,{children:(0,t.jsx)("p",{children:"View Details"})})]})})})]},e.id))})]})})})]})})},a_=()=>{let[e,s]=(0,l.useState)(!0),[a,m]=(0,l.useState)("overview"),[u,h]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),{data:y}=(0,sd.gM)(),{data:N}=(0,J._B)(),{data:b}=(0,L.Dj)(),{data:w}=(0,L.pb)({});(0,l.useEffect)(()=>{let e=()=>{let e=window.innerWidth<1024;h(e),e?s(!1):s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let _=()=>{u?j(!p):s(!e)},C=l.useMemo(()=>{var e;if(!(null==N?void 0:null===(e=N.active_coupons)||void 0===e?void 0:e.length))return{count:0,summary:"No active coupons"};let s=N.active_coupons.length,a=N.active_coupons.reduce((e,s)=>new Date(e.applied_at)>new Date(s.applied_at)?e:s),t=a.coupon_details.discount_value,l="";switch(a.coupon_details.coupon_type){case"percentage":l="".concat(t,"% off");break;case"fixed":l="$".concat(t," off");break;case"analysis_count":l="".concat(t," free analyses");break;default:l="Discount active"}return{count:s,summary:"Using ".concat(a.coupon_details.code," (").concat(l,")")}},[N]),Z=l.useMemo(()=>w?w.map(e=>({id:"".concat(e.time_of_use,"-").concat(e.transaction_type),type:e.credit_amount>0?"credit":"debit",title:"payment"===e.transaction_type?"Credit Purchase":"Document Analysis",date:(0,sm.WU)(new Date(e.time_of_use),"MMM dd, yyyy"),credit_amount:Math.abs(e.credit_amount),dollar_amount:e.dollar_amount,description:"payment"===e.transaction_type?"$".concat(Math.abs(e.credit_amount).toFixed(2)):"Analysis Usage"})):[],[w]),{usageData:S,usageMetrics:k}=l.useMemo(()=>{if(!w)return{usageData:[],usageMetrics:{currentMonth:0,trend:0}};let e=new Date,s=(0,sx.N)(e),a=(0,su.V)(e),t=(0,sx.N)((0,sh.W)(e,1)),l=(0,su.V)((0,sh.W)(e,1)),i=w.filter(e=>"usage"===e.transaction_type&&new Date(e.time_of_use)>=s&&new Date(e.time_of_use)<=a),r=w.filter(e=>"usage"===e.transaction_type&&new Date(e.time_of_use)>=t&&new Date(e.time_of_use)<=l),n=i.length,c=r.length,o=new Map,d=t;for(;d<=a;){let e=(0,sm.WU)(d,"d MMM");o.set(e,{date:e,analyses:0,credits:0}),d=new Date(d.setDate(d.getDate()+1))}return w.forEach(e=>{if("usage"===e.transaction_type){let s=(0,sm.WU)(new Date(e.time_of_use),"d MMM"),a=o.get(s)||{date:s,analyses:0,credits:0};o.set(s,{...a,analyses:a.analyses+1,credits:a.credits+Math.abs(e.credit_amount)})}}),{usageData:Array.from(o.values()),usageMetrics:{currentMonth:n,trend:n-c}}},[w]),D=l.useMemo(()=>({current:(null==b?void 0:b.credit_balance)||0,nextExpiration:{credits:0,days:30}}),[b]),A=e=>{m(e),u&&j(!1)},O=()=>{m("analyse"),console.log("New analysis clicked")},z=()=>{g(!0),console.log("Buy credits clicked")},F=()=>(0,t.jsx)(eB,{isOpen:e,toggleSidebar:_,activeTab:a,onTabChange:A});return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[u?(0,t.jsxs)(eq,{open:p,onOpenChange:j,children:[(0,t.jsx)(eX,{asChild:!0,children:(0,t.jsx)(o.z,{variant:"ghost",className:"fixed top-4 left-4 lg:hidden z-50",size:"sm",children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(e2,{side:"left",className:"p-0 w-80",children:F()})]}):F(),(0,t.jsxs)("div",{className:"\n          transition-all duration-300 \n          ".concat(u?"ml-0":e?"ml-64":"ml-20","\n        "),children:[(0,t.jsx)("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-30",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 ml-12 lg:ml-0",children:[(0,t.jsx)(so.default,{href:"/",className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors group",children:(0,t.jsxs)("div",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors flex items-center",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"hidden lg:flex ml-2 font-medium text-sm opacity-100 group-hover:opacity-100 transition-opacity duration-200",children:"Home"})]})}),(0,t.jsx)("div",{className:"h-6 w-px bg-gray-200"}),(0,t.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-violet-600 via-purple-600 to-blue-600 bg-clip-text text-transparent px-1 py-1 rounded-lg",children:a.charAt(0).toUpperCase()+a.slice(1)})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:O,className:"hidden sm:flex",children:[(0,t.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"New Analysis"]}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:O,className:"sm:hidden",children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})}),(0,t.jsxs)(o.z,{size:"sm",onClick:z,className:"hidden sm:flex bg-gradient-to-r from-violet-600 to-blue-600",children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Buy Credits"]}),(0,t.jsx)(o.z,{size:"sm",onClick:z,className:"sm:hidden bg-gradient-to-r from-violet-600 to-blue-600",children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})]})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:(0,t.jsx)("div",{className:"space-y-6",children:(()=>{switch(a){case"overview":return(0,t.jsx)(eH,{creditBalance:D,transactions:Z,onNewAnalysis:O,onBuyCredits:z,analytics:y||{total_analyses:0,total_cost:0,analyses_by_type:[],free_analysis_available:!1},activeCoupons:C,usageMetrics:k,usageData:S});case"activity":return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Recent Activities"}),(0,t.jsx)(d.SZ,{children:"Track your recent analyses and account activities"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)(f,{transactions:Z})})]});case"usage":return(0,t.jsx)(W,{});case"coupons":return(0,t.jsx)(et,{});case"docs":return(0,t.jsx)(eo,{});case"settings":return(0,t.jsx)(eD,{});case"analyse":return(0,t.jsx)(sc,{},"analysis-flow-".concat(a));case"manage-analysis":return(0,t.jsx)(sI,{});case"manage-coupons":return(0,t.jsx)(sq,{});case"manage-credits":return(0,t.jsx)(s2,{});case"saved-analysis":return(0,t.jsx)(aw,{});case"credits":return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Credits & Billing"}),(0,t.jsx)(d.SZ,{children:"Manage your credits and view billing history"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(x,{balance:D.current,nextExpiration:D.nextExpiration,onTopUp:z}),(0,t.jsx)(f,{transactions:Z})]})})]});default:return null}})()})})]}),(0,t.jsx)(e1,{isOpen:v,onOpenChange:g})]})}},84190:function(e,s,a){"use strict";a.d(s,{$F:function(){return m},AW:function(){return x},VD:function(){return h},Xi:function(){return u},h_:function(){return d}});var t=a(57437),l=a(2265),i=a(45333),r=a(10407),n=a(30401),c=a(40519),o=a(94508);let d=i.fC,m=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,l.forwardRef((e,s)=>{let{className:a,inset:l,children:n,...c}=e;return(0,t.jsxs)(i.fF,{ref:s,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...c,children:[n,(0,t.jsx)(r.Z,{className:"ml-auto"})]})}).displayName=i.fF.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.tu,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=i.tu.displayName;let x=l.forwardRef((e,s)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,t.jsx)(i.Uv,{children:(0,t.jsx)(i.VY,{ref:s,sideOffset:l,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});x.displayName=i.VY.displayName;let u=l.forwardRef((e,s)=>{let{className:a,inset:l,...r}=e;return(0,t.jsx)(i.ck,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",l&&"pl-8",a),...r})});u.displayName=i.ck.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,checked:r,...c}=e;return(0,t.jsxs)(i.oC,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...c,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(i.wU,{children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})}),l]})}).displayName=i.oC.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(i.Rk,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(i.wU,{children:(0,t.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=i.Rk.displayName,l.forwardRef((e,s)=>{let{className:a,inset:l,...r}=e;return(0,t.jsx)(i.__,{ref:s,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...r})}).displayName=i.__.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});h.displayName=i.Z0.displayName}},function(e){e.O(0,[360,337,505,544,557,181,64,648,736,350,704,685,868,106,791,273,322,971,117,744],function(){return e(e.s=70114)}),_N_E=e.O()}]);