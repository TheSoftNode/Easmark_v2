(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{98171:function(e,t,r){Promise.resolve().then(r.bind(r,78816))},78816:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(57437),o=r(62869),i=r(95186),a=r(89345),s=r(51817),l=r(2265),u=r(99376),c=r(69064),d=r(21123);function m(){let e=(0,u.useSearchParams)(),t=(0,u.useRouter)(),r=e.get("email"),[m,f]=(0,l.useState)(""),[h,{isLoading:v}]=(0,d.qQ)(),[g,{isLoading:y}]=(0,d.p6)();if(!r)return t.push("/signup"),null;let p=async e=>{if(e.preventDefault(),!m.trim()){c.ZP.error("Please enter the verification code");return}try{await c.ZP.promise(h({email:r,code:m}).unwrap(),{loading:"Verifying email...",success:"Email verified successfully! Redirecting...",error:e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to verify email"}}),t.push("/email-verified")}catch(e){console.error("Verification error:",e)}},b=async()=>{try{await c.ZP.promise(g({email:r}).unwrap(),{loading:"Sending new code...",success:"New verification code sent!",error:e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to send code"}})}catch(e){console.error("Resend error:",e)}};return(0,n.jsx)("main",{className:"min-h-[calc(100vh-4rem)] pt-24 flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 p-4",children:(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsxs)("div",{className:"bg-white shadow-xl rounded-2xl p-8 relative",children:[(0,n.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500"}),(0,n.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,n.jsx)(a.Z,{className:"h-12 w-12 text-indigo-500 mb-4"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900",children:"Verify Your Email"}),(0,n.jsxs)("p",{className:"text-gray-600 text-center mt-2",children:["We've sent a verification code to ",(0,n.jsx)("span",{className:"font-medium",children:r})]})]}),(0,n.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Verification Code"}),(0,n.jsx)(i.I,{value:m,onChange:e=>f(e.target.value),placeholder:"Enter verification code",required:!0})]}),(0,n.jsx)(o.z,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500    hover:from-blue-600 hover:via-indigo-600 hover:to-violet-600 text-white h-11",disabled:v,children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify Email"})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Didn't receive the code?"," ",(0,n.jsx)("button",{onClick:b,disabled:y,className:"text-indigo-600 hover:text-indigo-500 font-semibold disabled:opacity-50",children:y?"Sending...":"Resend Code"})]})})]})})})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return u}});var n=r(57437),o=r(2265),i=r(37053),a=r(90535),s=r(94508);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:r,variant:o,size:a,asChild:u=!1,...c}=e,d=u?i.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(l({variant:o,size:a,className:r})),ref:t,...c})});u.displayName="Button"},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(57437),o=r(2265),i=r(94508);let a=o.forwardRef((e,t)=>{let{className:r,type:o,...a}=e;return(0,n.jsx)("input",{type:o,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});a.displayName="Input"},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(61994),o=r(53335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89345:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},21123:function(e,t,r){"use strict";r.d(t,{$h:function(){return y},Bl:function(){return l},Pw:function(){return v},TG:function(){return p},YA:function(){return d},_y:function(){return m},gL:function(){return g},iJ:function(){return s},iS:function(){return f},p6:function(){return c},qQ:function(){return u}});var n=r(24960),o=r(23557);let i=(0,n.ni)({baseUrl:"".concat("https://easmark-platform.onrender.com","/users"),prepareHeaders:e=>{let t=localStorage.getItem("token");return t&&e.set("authorization","Bearer ".concat(t)),e}}),a=async(e,t,r)=>{let n=await i(e,t,r);if(console.log(n),null==n?void 0:n.error){var o;if((null===(o=n.error.data)||void 0===o?void 0:o.code)==="token_not_valid"){let o=localStorage.getItem("token");(await t.dispatch(s.endpoints.refreshToken.initiate({access_token:o||""}))).data?n=await i(e,t,r):(localStorage.removeItem("token"),window.location.href="/login")}}return n},s=(0,o.LC)({reducerPath:"authApi",baseQuery:a,tagTypes:["Auth"],endpoints:e=>({signup:e.mutation({query:e=>({url:"/signup/",method:"POST",body:e}),onQueryStarted:async(e,t)=>{let{queryFulfilled:r}=t;try{let{data:e}=await r;localStorage.setItem("token",e.access)}catch(e){}}}),verifyEmail:e.mutation({query:e=>({url:"/verify-email/",method:"POST",body:e})}),resendVerification:e.mutation({query:e=>({url:"/resend-verification/",method:"POST",body:e})}),login:e.mutation({query:e=>({url:"/login/",method:"POST",body:e}),onQueryStarted:async(e,t)=>{let{queryFulfilled:r}=t;try{let{data:e}=await r;localStorage.setItem("token",e.access)}catch(e){}}}),logout:e.mutation({query:()=>({url:"/logout/",method:"POST"}),onQueryStarted:async(e,t)=>{let{queryFulfilled:r}=t;try{await r,localStorage.removeItem("token")}catch(e){}}}),getMe:e.query({query:()=>({url:"/me"})}),refreshToken:e.mutation({query:e=>({url:"/refresh/",method:"POST",body:e}),onQueryStarted:async(e,t)=>{let{queryFulfilled:r}=t;try{let{data:e}=await r;localStorage.setItem("token",e.access)}catch(e){}}}),requestPasswordReset:e.mutation({query:e=>({url:"/password/reset/",method:"POST",body:e})}),updateProfile:e.mutation({query:e=>({url:"/profile/update/",method:"PUT",body:e})}),resetPassword:e.mutation({query:e=>({url:"/password/reset/confirm/",method:"POST",body:e})}),changePassword:e.mutation({query:e=>({url:"/password/change/",method:"POST",body:e})})})}),{useSignupMutation:l,useVerifyEmailMutation:u,useResendVerificationMutation:c,useLoginMutation:d,useLogoutMutation:m,useGetMeQuery:f,useRefreshTokenMutation:h,useRequestPasswordResetMutation:v,useResetPasswordMutation:g,useChangePasswordMutation:y,useUpdateProfileMutation:p}=s},90535:function(e,t,r){"use strict";r.d(t,{j:function(){return a}});var n=r(61994);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=n.W,a=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:s}=t,l=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;let i=o(t)||o(n);return a[e][i]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return i(e,l,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...u}[t]):({...s,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[557,181,64,971,117,744],function(){return e(e.s=98171)}),_N_E=e.O()}]);